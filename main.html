<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hubble | Beta</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap');
        :root {
            --primary: #009CFC;
            --secondary: #A0AAFF;
            --accent: #C97FFD;
            --background-light: #f7f8fa;
            --star: #A0AAFF;
            --planet: #C97FFD;
            --text-light: #222;
            --sidebar-bg-light: #f4f7ff;
            --sidebar-border-light: #e0e6f7;
            --sidebar-active-light: #e6f2ff;
            --main-content-light: transparent;
            --background-dark: #181e2a;
            --sidebar-bg-dark: #232a3a;
            --sidebar-border-dark: #2c3550;
            --sidebar-active-dark: #232a3a;
            --text-dark: #f7f8fa;
            --main-content-dark: transparent;
            --unavailable-light: #FFC107;
            --unavailable-dark: #FF8F00;
            
            
            /* Fall Theme Variables */
            --fall-primary: #d2691e;
            --fall-secondary: #cd853f;
            --fall-accent: #b8860b;
            --fall-background: #fff8dc;
            --fall-sidebar-bg: #f5f5dc;
            --fall-sidebar-border: #daa520;
            --fall-sidebar-active: #f0e68c;
            --fall-text: #8b4513;
            --fall-main-content: transparent;
            
            /* Winter Theme Variables */
            --winter-primary: #4682b4;
            --winter-secondary: #5f9ea0;
            --winter-accent: #2e8b57;
            --winter-background: #f0f8ff;
            --winter-sidebar-bg: #e6f3ff;
            --winter-sidebar-border: #87ceeb;
            --winter-sidebar-active: #b0e0e6;
            --winter-text: #2f4f4f;
            --winter-main-content: transparent;
            
            /* Fall Dark Theme Variables */
            --fall-dark-primary: #ff8c00;
            --fall-dark-secondary: #ffa500;
            --fall-dark-accent: #ff6347;
            --fall-dark-background: #2d1b0e;
            --fall-dark-sidebar-bg: #3d2815;
            --fall-dark-sidebar-border: #8b4513;
            --fall-dark-sidebar-active: #4a2c0f;
            --fall-dark-text: #f4a460;
            --fall-dark-main-content: transparent;
            
            /* Winter Dark Theme Variables */
            --winter-dark-primary: #87ceeb;
            --winter-dark-secondary: #b0e0e6;
            --winter-dark-accent: #20b2aa;
            --winter-dark-background: #0f1419;
            --winter-dark-sidebar-bg: #1a2332;
            --winter-dark-sidebar-border: #4682b4;
            --winter-dark-sidebar-active: #2c3e50;
            --winter-dark-text: #e0f6ff;
            --winter-dark-main-content: transparent;
            
            /* Spring Dark Theme Variables */
            --spring-dark-primary: #90ee90;
            --spring-dark-secondary: #98fb98;
            --spring-dark-accent: #32cd32;
            --spring-dark-background: #0d1a0d;
            --spring-dark-sidebar-bg: #1a2e1a;
            --spring-dark-sidebar-border: #228b22;
            --spring-dark-sidebar-active: #2d4a2d;
            --spring-dark-text: #e0ffe0;
            --spring-dark-main-content: transparent;
        }
        body {
            font-family: 'Poppins', 'Segoe UI', Arial, sans-serif;
            margin: 0;
            min-height: 100vh;
            overflow: hidden;
            position: relative;
            transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1), color 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        body[data-theme="light"] {
            background: var(--background-light);
            color: var(--text-light);
        }
        body[data-theme="dark"] {
            background: var(--background-dark);
            color: var(--text-dark);
        }
        body[data-theme="fall"] {
            background: var(--fall-background);
            color: var(--fall-text);
        }
        body[data-theme="winter"] {
            background: var(--winter-background);
            color: var(--winter-text);
        }
        
        /* Fall Dark Theme */
        body[data-theme="fall-dark"] {
            background: var(--fall-dark-background);
            color: var(--fall-dark-text);
        }
        
        /* Winter Dark Theme */
        body[data-theme="winter-dark"] {
            background: var(--winter-dark-background);
            color: var(--winter-dark-text);
        }
        
        /* Spring Dark Theme */
        body[data-theme="spring-dark"] {
            background: var(--spring-dark-background);
            color: var(--spring-dark-text);
        }
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 0;
            pointer-events: none;
            background: 
                radial-gradient(circle at 80% 20%, rgba(201,127,253,0.13) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(0,156,252,0.10) 0 5vw, transparent 8vw),
                repeating-radial-gradient(circle at 30% 30%, #a2dbff 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, #A0AAFF 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 30% 30%, #fff 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(160,170,255,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.22;
        }
        
        /* Fall theme falling leaves animation */
        body[data-theme="fall"]::before {
            background: 
                radial-gradient(circle at 80% 20%, rgba(210,105,30,0.15) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(205,133,63,0.12) 0 5vw, transparent 8vw),
                repeating-radial-gradient(circle at 30% 30%, #f0e68c 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, #daa520 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 30% 30%, #fff8dc 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(218,165,32,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.25;
        }
        
        /* Winter theme snow effect */
        body[data-theme="winter"]::before {
            background: 
                radial-gradient(circle at 80% 20%, rgba(70,130,180,0.15) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(95,158,160,0.25) 0 5vw, transparent 8vw),
                radial-gradient(circle at 50% 50%, rgba(46,139,87,0.2) 0 15vw, transparent 20vw),
                repeating-radial-gradient(circle at 30% 30%, #e6f3ff 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(135,206,235,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.3;
        }
        
        /* Fall dark theme background effect */
        body[data-theme="fall-dark"]::before {
            background: 
                radial-gradient(circle at 80% 20%, rgba(255,140,0,0.15) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(255,165,0,0.12) 0 5vw, transparent 8vw),
                repeating-radial-gradient(circle at 30% 30%, #8b4513 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, #ff6347 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 30% 30%, #2d1b0e 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(255,140,0,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.25;
        }
        
        /* Winter dark theme background effect */
        body[data-theme="winter-dark"]::before {
            background: 
                radial-gradient(circle at 80% 20%, rgba(135,206,235,0.15) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(176,224,230,0.25) 0 5vw, transparent 8vw),
                radial-gradient(circle at 50% 50%, rgba(32,178,170,0.2) 0 15vw, transparent 20vw),
                repeating-radial-gradient(circle at 30% 30%, #1a2332 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(135,206,235,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.3;
        }
        
        /* Spring dark theme background effect */
        body[data-theme="spring-dark"]::before {
            background: 
                radial-gradient(circle at 80% 20%, rgba(144,238,144,0.15) 0 8vw, transparent 12vw),
                radial-gradient(circle at 15% 80%, rgba(152,251,152,0.25) 0 5vw, transparent 8vw),
                radial-gradient(circle at 50% 50%, rgba(50,205,50,0.2) 0 15vw, transparent 20vw),
                repeating-radial-gradient(circle at 30% 30%, #1a2e1a 0 1px, transparent 2px 100px),
                repeating-radial-gradient(circle at 50% 50%, rgba(144,238,144,0.08) 0 60px, transparent 62px 100vw);
            opacity: 0.3;
        }
        
        
        /* New Falling Leaves Animation */
        .falling-leaves {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .falling-leaf {
            position: absolute;
            width: 15px;
            height: 15px;
            background: #d2691e;
            border-radius: 0 100% 0 100%;
            animation: leafFall 4s linear infinite;
            opacity: 0.7;
        }
        
        .falling-leaf:nth-child(odd) {
            background: #8b4513;
            width: 12px;
            height: 12px;
        }
        
        .falling-leaf:nth-child(3n) {
            background: #daa520;
            width: 18px;
            height: 18px;
        }
        
        @keyframes leafFall {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Hide falling leaves for non-fall themes */
        body:not([data-theme="fall"]) .falling-leaves {
            display: none;
        }
        
        /* Ensure falling leaves are visible during fall season */
        body[data-theme="fall"] .falling-leaves {
            display: block;
        }
        
        /* Snowflakes animation */
        .snowflakes {
            position: fixed;
            top: -100px;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .snowflake {
            position: absolute;
            color: #ffffff;
            font-size: 1em;
            animation: fall linear infinite;
            opacity: 0.8;
        }
        
        @keyframes fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Hide snowflakes for non-winter themes */
        body:not([data-theme="winter"]) .snowflakes {
            display: none;
        }
        .topbar {
            position: fixed;
            top: 0; left: 0; right: 0;
            height: 56px;
            background: #fff;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 10000;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        body[data-theme="dark"] .topbar {
            background: #20263a;
            box-shadow: 0 2px 12px rgba(0,0,0,0.13);
        }
        body[data-theme="fall"] .topbar {
            background: var(--fall-sidebar-bg);
            box-shadow: 0 2px 12px rgba(210,105,30,0.15);
        }
        .hubble-gradient {
            font-family: 'Poppins', 'Helvetica Neue', Arial, sans-serif;
            font-weight: 700;
            font-size: clamp(1.5rem, 5vw, 2.2rem);
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 50%, #C97FFD 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            margin-left: 2.2rem;
            letter-spacing: 2px;
            -webkit-user-select: none;
            user-select: none;
            cursor: default;
        }

        
        .search-bar-custom {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            max-width: 40vw;
            min-width: 200px;
            height: 38px;
            border-radius: 8px;
            border: 1.5px solid var(--secondary);
            font-size: 1.08rem;
            padding: 0 1.1rem;
            background: var(--background-light);
            color: var(--text-light);
            outline: none;
            transition: border 0.18s, background 0.18s;
            z-index: 10;
            pointer-events: none;
            cursor: not-allowed;
            text-align: center;
        }
        .search-bar-custom:focus {
            border: 1.5px solid var(--primary);
            background: #eaf6ff;
        }
        body[data-theme="dark"] .search-bar-custom {
            background: #232a3a;
            color: #f7f8fa;
            border: 1.5px solid var(--sidebar-border-dark);
        }
        body[data-theme="dark"] .search-bar-custom:focus {
            background: #232a3a;
        }
        body[data-theme="fall"] .search-bar-custom {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border: 1.5px solid var(--fall-sidebar-border);
        }
        body[data-theme="fall"] .search-bar-custom:focus {
            background: var(--fall-sidebar-active);
            border: 1.5px solid var(--fall-primary);
        }
        
        

        /* Alpha Badge Styles */
        .alpha-badge {
            display: inline-block;
            margin-left: 1rem;
            background: linear-gradient(45deg, #4CAF50, #9C27B0, #FF9800, #4CAF50, #9C27B0);
            background-size: 400% 400%;
            color: white !important;
            -webkit-text-fill-color: white !important;
            padding: 0.3rem 0.8rem;
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            animation: alpha-gradient-flow 3s ease-in-out infinite;
            vertical-align: middle;
            -webkit-background-clip: initial !important;
            background-clip: initial !important;
        }

        @keyframes alpha-gradient-flow {
            0%, 100% {
                background-position: 0% 50%;
            }
            25% {
                background-position: 100% 50%;
            }
            50% {
                background-position: 100% 100%;
            }
            75% {
                background-position: 0% 100%;
            }
        }

        .alpha-badge.hidden {
            display: none;
        }
        
        
        
        
        
        
        
        @keyframes hallOfFameGlow {
            0% { 
                box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
            }
            100% { 
                box-shadow: 0 8px 25px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6);
            }
        }
        
        
        
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10001;
            overflow: hidden;
        }
        
        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff6b6b;
            animation: confetti-fall linear forwards;
            opacity: 0.9;
        }
        
        .confetti-piece:nth-child(2n) { background: #4ecdc4; }
        .confetti-piece:nth-child(3n) { background: #45b7d1; }
        .confetti-piece:nth-child(4n) { background: #96ceb4; }
        .confetti-piece:nth-child(5n) { background: #feca57; }
        .confetti-piece:nth-child(6n) { background: #ff9ff3; }
        .confetti-piece:nth-child(7n) { background: #54a0ff; }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
        
        
        
        
        
        
        
        
        
        
        
        .onboarding-progress-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .onboarding-progress-track {
            width: 85%;
            height: 8px;
            background: rgba(160, 170, 255, 0.3);
            border-radius: 4px;
            position: relative;
        }
        
        .onboarding-progress-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%);
            background-size: 400% 100%;
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            animation: hubble-gradient-flow 12s linear infinite;
            position: relative;
        }
        
        .onboarding-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-light);
            text-align: center;
            z-index: 2;
            background: rgba(255, 255, 255, 0.95);
            padding: 4px 10px;
            border-radius: 6px;
            border: 1px solid rgba(160, 170, 255, 0.2);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        body[data-theme="dark"] .onboarding-progress-text {
            color: var(--text-dark);
            background: rgba(35, 42, 58, 0.95);
            border: 1px solid rgba(160, 170, 255, 0.3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .onboarding-gift-small {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            z-index: 3;
        }
        
        
        .onboarding-progress-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .onboarding-progress-track {
            width: 85%;
            height: 8px;
            background: rgba(160, 170, 255, 0.3);
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(160, 170, 255, 0.4);
        }
        
        body[data-theme="dark"] .onboarding-progress-track {
            background: rgba(160, 170, 255, 0.1);
            border: 1px solid rgba(160, 170, 255, 0.2);
        }
        
        .onboarding-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%);
            background-size: 400% 100%;
            border-radius: 4px;
            animation: hubble-gradient-flow 12s linear infinite;
            position: relative;
        }
        
        .onboarding-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-light);
            text-align: center;
            z-index: 2;
            background: rgba(255, 255, 255, 0.95);
            padding: 4px 10px;
            border-radius: 6px;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(0, 0, 0, 0.2);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        body[data-theme="dark"] .onboarding-progress-text {
            color: var(--text-dark);
            background: rgba(35, 42, 58, 0.95);
            border: 1px solid rgba(160, 170, 255, 0.3);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .onboarding-gift-small {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 1.2rem;
            animation: gift-bounce 2s ease-in-out infinite;
        }
        .layout {
            display: flex;
            margin-top: 56px;
            height: calc(100vh - 56px);
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 210px;
            background: var(--sidebar-bg-light);
            border-right: 1.5px solid var(--sidebar-border-light);
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            padding-top: 2.2rem;
            z-index: 50;
            position: relative;
            min-width: 170px;
            box-sizing: border-box;
            transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .sidebar .nav-item {
            width: 100%;
            padding: 0.9rem 2.2rem;
            color: var(--primary);
            font-size: 1.13rem;
            font-weight: 500;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
            border-radius: 0 20px 20px 0;
            margin-bottom: 0.3rem;
            transition: background 0.18s, color 0.18s, transform 0.18s;
        }
        
        .sidebar .nav-item.active, .sidebar .nav-item:hover {
            background: var(--sidebar-active-light);
            color: var(--accent);
            transform: translateX(6px) scale(1.04);
        }
        
        .sidebar .hall-of-fame-block {
            margin-top: auto;
            width: 100%;
            padding: 1.1rem 2.2rem;
            border-top: 1.5px solid var(--sidebar-border-light);
            display: flex;
            align-items: center;
            color: var(--primary);
            font-size: 1.1rem;
            cursor: pointer;
            background: none;
            transition: background 0.18s, color 0.18s, transform 0.18s;
            box-sizing: border-box;
        }
        
        .sidebar .hall-of-fame-block:hover {
            background: var(--sidebar-active-light);
            color: var(--accent);
            transform: translateX(6px) scale(1.04);
            border-radius: 0 20px 20px 0;
        }
        
        /* Dark theme sidebar */
        body[data-theme="dark"] .sidebar {
            background: var(--sidebar-bg-dark);
            border-right: 1.5px solid var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .sidebar .nav-item.active,
        body[data-theme="dark"] .sidebar .nav-item:hover {
            background: #2c3550;
            color: #C97FFD;
        }
        
        body[data-theme="dark"] .sidebar .hall-of-fame-block {
            border-top: 1.5px solid var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .sidebar .hall-of-fame-block:hover {
            background: var(--sidebar-active-dark);
            color: var(--accent);
        }
        
        /* Fall theme sidebar */
        body[data-theme="fall"] .sidebar {
            background: var(--fall-sidebar-bg);
            border-right-color: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .nav-item:hover {
            background: var(--fall-sidebar-active);
        }
        
        body[data-theme="fall"] .nav-item.active {
            background: var(--fall-sidebar-active);
            border-left-color: var(--fall-primary);
        }
        
        body[data-theme="fall"] .nav-text {
            color: var(--fall-text);
        }
        
        /* Winter theme sidebar */
        body[data-theme="winter"] .sidebar {
            background: var(--winter-sidebar-bg);
            border-right-color: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .nav-item:hover {
            background: var(--winter-sidebar-active);
        }
        
        body[data-theme="winter"] .nav-item.active {
            background: var(--winter-sidebar-active);
            border-left-color: var(--winter-primary);
        }
        
        body[data-theme="winter"] .nav-text {
            color: var(--winter-text);
        }
        
        /* Music Player Styles */
        .music-container {
            padding: 2rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .music-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .music-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .music-subtitle {
            color: var(--text-light);
            font-size: 1.1rem;
            opacity: 0.8;
        }
        
        .music-library {
            margin-bottom: 3rem;
        }
        
        .music-tracks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .music-track {
            background: var(--sidebar-bg-light);
            border: 2px solid var(--sidebar-border-light);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .music-track:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
            border-color: var(--primary);
        }
        
        .music-track.playing {
            border-color: var(--primary);
            background: var(--sidebar-active-light);
            box-shadow: 0 0 0 4px rgba(0, 156, 252, 0.2);
        }
        
        .track-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .track-image {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            object-fit: cover;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }
        
        .track-image img {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            object-fit: cover;
        }
        
        .track-details {
            flex: 1;
        }
        
        .track-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.25rem;
        }
        
        .track-artist {
            font-size: 1rem;
            color: var(--text-light);
            opacity: 0.8;
        }
        
        .track-play-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .track-play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 156, 252, 0.3);
        }
        
        .track-play-btn.playing {
            background: linear-gradient(135deg, #ff4757, #ff6b7a);
        }
        
        .input-section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 1rem;
            text-align: center;
        }
        
        .music-input-section {
            margin-bottom: 2rem;
        }
        
        .url-input-container {
            display: flex;
            gap: 1rem;
            align-items: center;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .music-url-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--sidebar-border-light);
            border-radius: 12px;
            font-size: 1rem;
            background: var(--sidebar-bg-light);
            color: var(--text-light);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .music-url-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(0, 156, 252, 0.2);
            background: var(--sidebar-active-light);
        }
        
        .load-music-btn {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
        }
        
        .load-music-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 156, 252, 0.3);
        }
        
        .load-music-btn:active {
            transform: translateY(0);
        }
        
        .music-player {
            background: var(--sidebar-bg-light);
            border: 2px solid var(--sidebar-border-light);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .player-info {
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .track-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 0.5rem;
        }
        
        .track-url {
            color: var(--text-light);
            opacity: 0.7;
            font-size: 0.9rem;
            word-break: break-all;
        }
        
        .player-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 156, 252, 0.3);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .progress-container {
            margin-bottom: 1.5rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--sidebar-border-light);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.5rem;
            cursor: pointer;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.1s ease;
        }
        
        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.8;
        }
        
        .volume-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .volume-slider {
            flex: 1;
            height: 6px;
            background: var(--sidebar-border-light);
            border-radius: 3px;
            outline: none;
            cursor: pointer;
        }
        
        .volume-slider::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
        }
        
        .volume-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .volume-display {
            font-size: 0.9rem;
            color: var(--text-light);
            opacity: 0.8;
            min-width: 40px;
        }
        
        /* Dark theme music player */
        body[data-theme="dark"] .music-subtitle,
        body[data-theme="dark"] .track-title,
        body[data-theme="dark"] .track-url,
        body[data-theme="dark"] .time-display,
        body[data-theme="dark"] .volume-display,
        body[data-theme="dark"] .input-section-title,
        body[data-theme="dark"] .track-name,
        body[data-theme="dark"] .track-artist {
            color: var(--text-dark);
        }
        
        body[data-theme="dark"] .music-track {
            background: var(--sidebar-bg-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .music-track:hover {
            border-color: var(--primary);
        }
        
        body[data-theme="dark"] .music-track.playing {
            background: var(--sidebar-active-dark);
        }
        
        body[data-theme="dark"] .music-url-input {
            background: var(--sidebar-bg-dark);
            color: var(--text-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .music-url-input:focus {
            background: var(--sidebar-active-dark);
        }
        
        body[data-theme="dark"] .music-player {
            background: var(--sidebar-bg-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .progress-bar {
            background: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .volume-slider {
            background: var(--sidebar-border-dark);
        }
        
        /* Fall theme music player */
        body[data-theme="fall"] .music-subtitle,
        body[data-theme="fall"] .track-title,
        body[data-theme="fall"] .track-url,
        body[data-theme="fall"] .time-display,
        body[data-theme="fall"] .volume-display,
        body[data-theme="fall"] .input-section-title,
        body[data-theme="fall"] .track-name,
        body[data-theme="fall"] .track-artist {
            color: var(--fall-text);
        }
        
        body[data-theme="fall"] .music-track {
            background: var(--fall-sidebar-bg);
            border-color: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .music-track:hover {
            border-color: var(--fall-primary);
        }
        
        body[data-theme="fall"] .music-track.playing {
            background: var(--fall-sidebar-active);
        }
        
        body[data-theme="fall"] .music-url-input {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border-color: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .music-url-input:focus {
            background: var(--fall-sidebar-active);
            border-color: var(--fall-primary);
            box-shadow: 0 0 0 4px rgba(210, 105, 30, 0.2);
        }
        
        body[data-theme="fall"] .music-player {
            background: var(--fall-sidebar-bg);
            border-color: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .progress-bar {
            background: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .volume-slider {
            background: var(--fall-sidebar-border);
        }
        
        body[data-theme="fall"] .volume-slider::-webkit-slider-thumb,
        body[data-theme="fall"] .volume-slider::-moz-range-thumb {
            background: var(--fall-primary);
        }
        
        /* Winter theme music player */
        body[data-theme="winter"] .music-subtitle,
        body[data-theme="winter"] .track-title,
        body[data-theme="winter"] .track-url,
        body[data-theme="winter"] .time-display,
        body[data-theme="winter"] .volume-display,
        body[data-theme="winter"] .input-section-title,
        body[data-theme="winter"] .track-name,
        body[data-theme="winter"] .track-artist {
            color: var(--winter-text);
        }
        
        body[data-theme="winter"] .music-track {
            background: var(--winter-sidebar-bg);
            border-color: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .music-track:hover {
            border-color: var(--winter-primary);
        }
        
        body[data-theme="winter"] .music-track.playing {
            background: var(--winter-sidebar-active);
        }
        
        body[data-theme="winter"] .music-url-input {
            background: var(--winter-sidebar-bg);
            color: var(--winter-text);
            border-color: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .music-url-input:focus {
            background: var(--winter-sidebar-active);
            border-color: var(--winter-primary);
            box-shadow: 0 0 0 4px rgba(70, 130, 180, 0.2);
        }
        
        body[data-theme="winter"] .music-player {
            background: var(--winter-sidebar-bg);
            border-color: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .progress-bar {
            background: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .volume-slider {
            background: var(--winter-sidebar-border);
        }
        
        body[data-theme="winter"] .volume-slider::-webkit-slider-thumb,
        body[data-theme="winter"] .volume-slider::-moz-range-thumb {
            background: var(--winter-primary);
        }
        .main-content {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            background: var(--main-content-light);
            transition: background-color 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
        }
        body[data-theme="dark"] .main-content {
            background: var(--main-content-dark);
        }
 .main-content {
            background: transparent;
            border-radius: 0;
            margin: 0;
            box-shadow: none;
        }
        body[data-theme="fall"] .main-content {
            background: var(--fall-main-content);
        }
        
        /* Theme toggle button */
        .theme-toggle {
            position: fixed;
            right: 2.2rem;
            bottom: 2.2rem;
            z-index: 1000;
            background: #fff;
            color: #222;
            border: 2px solid var(--secondary);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.10);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
            pointer-events: auto;
        }
        .theme-toggle:hover {
            background: var(--accent);
            color: #fff;
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .theme-toggle:active {
            transform: scale(0.9) rotate(0deg);
            transition: all 0.1s ease-out;
        }
        body[data-theme="dark"] .theme-toggle {
            background: #232a3a;
            color: #f7f8fa;
            border: 2px solid var(--sidebar-border-dark);
        }
        body[data-theme="dark"] .theme-toggle:hover {
            background: var(--accent);
            color: #fff;
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
        }
        body[data-theme="fall"] .theme-toggle {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border: 2px solid var(--fall-sidebar-border);
        }
        body[data-theme="fall"] .theme-toggle:hover {
            background: var(--fall-primary);
            color: #fff;
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 4px 20px rgba(210,105,30,0.25);
        }
        
        /* Bug button */
        .bug-button {
            position: fixed;
            left: 2.2rem;
            bottom: 2.2rem;
            z-index: 1000;
            background: #fff;
            color: #222;
            border: 2px solid var(--secondary);
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            box-shadow: 0 2px 12px rgba(0,0,0,0.10);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
            pointer-events: auto;
        }
        .bug-button:hover {
            background: var(--primary);
            color: #fff;
            transform: scale(1.1) rotate(-15deg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }
        .bug-button:active {
            transform: scale(0.9) rotate(0deg);
            transition: all 0.1s ease-out;
        }
        body[data-theme="dark"] .bug-button {
            background: #232a3a;
            color: #f7f8fa;
            border: 2px solid var(--sidebar-border-dark);
        }
        body[data-theme="dark"] .bug-button:hover {
            background: var(--primary);
            color: #fff;
            transform: scale(1.1) rotate(-15deg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
        }
        body[data-theme="fall"] .bug-button {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border: 2px solid var(--fall-sidebar-border);
        }
        body[data-theme="fall"] .bug-button:hover {
            background: var(--fall-primary);
            color: #fff;
            transform: scale(1.1) rotate(-15deg);
            box-shadow: 0 4px 20px rgba(210,105,30,0.25);
        }
        
        /* Hide buttons when game is open */
        .game-fullscreen .theme-toggle,
        .game-fullscreen .bug-button,
        .game-fullscreen .hall-of-fame-btn {
            display: none;
        }
        
        /* Hide theme toggle during seasonal themes */
        body[data-theme="fall"] .theme-toggle,
        body[data-theme="fall-dark"] .theme-toggle,
        body[data-theme="winter"] .theme-toggle,
        body[data-theme="winter-dark"] .theme-toggle {
            display: none;
        }
        
        /* Help Popup Styles */
        .help-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10005;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .help-popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        body[data-theme="dark"] .help-popup-overlay {
            backdrop-filter: blur(2px);
        }
        
        .help-popup {
            background: var(--background-light);
            color: var(--text-light);
            padding: 2.5rem;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            border: 2px solid var(--secondary);
            transition: all 0.3s ease;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .help-popup-overlay.show .help-popup {
            transform: scale(1) translateY(0);
        }
        
        body[data-theme="dark"] .help-popup {
            background: var(--sidebar-bg-dark);
            color: var(--text-dark);
            border-color: var(--sidebar-border-dark);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        }
        
        .help-popup-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 50%, #C97FFD 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .help-popup-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
            color: var(--text-light);
        }
        
        body[data-theme="dark"] .help-popup-text {
            color: var(--text-dark);
        }
        body[data-theme="fall"] .help-popup {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border-color: var(--fall-sidebar-border);
        }
        body[data-theme="fall"] .help-popup-text {
            color: var(--fall-text);
        }
        
        .help-popup-buttons {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            align-items: center;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        /* Bug popup styles */
        .bug-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 107, 107, 0.1);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .bug-popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        body[data-theme="dark"] .bug-popup-overlay {
            background: rgba(255, 107, 107, 0.15);
            backdrop-filter: blur(2px);
        }
        
        .bug-popup {
            background: var(--background-light);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 107, 107, 0.3);
            border: 2px solid #ff6b6b;
            transition: all 0.3s ease;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .bug-popup-overlay.show .bug-popup {
            transform: scale(1) translateY(0);
        }
        
        body[data-theme="dark"] .bug-popup {
            background: var(--sidebar-bg-dark);
            border-color: #ff5252;
        }
        
        .bug-popup-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #ff6b6b;
            text-shadow: 0 2px 4px rgba(255, 107, 107, 0.3);
        }
        
        body[data-theme="dark"] .bug-popup-title {
            color: #ff5252;
        }
        
        .bug-popup-text {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-light);
            margin-bottom: 2rem;
        }
        
        body[data-theme="dark"] .bug-popup-text {
            color: var(--text-dark);
        }
        body[data-theme="fall"] .bug-popup {
            background: var(--fall-sidebar-bg);
            border-color: var(--fall-primary);
        }
        body[data-theme="fall"] .bug-popup-text {
            color: var(--fall-text);
        }
        
        .bug-popup-buttons {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            align-items: center;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .bug-popup-btn {
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .bug-popup-btn.create {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }
        
        .bug-popup-btn.create:hover {
            background: linear-gradient(135deg, #ee5a24, #d63031);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }
        
        .bug-popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            transition: color 0.3s ease;
        }
        
        .bug-popup-close:hover {
            color: var(--primary);
        }
        
        body[data-theme="dark"] .bug-popup-close {
            color: var(--text-dark);
        }
        
        /* Bug Ticket Popup Styles */
        .bug-ticket-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 107, 107, 0.1);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .bug-ticket-popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        body[data-theme="dark"] .bug-ticket-popup-overlay {
            background: rgba(255, 107, 107, 0.15);
            backdrop-filter: blur(2px);
        }
        
        .bug-ticket-popup {
            background: var(--background-light);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 107, 107, 0.3);
            border: 2px solid #ff6b6b;
            transition: all 0.3s ease;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .bug-ticket-popup-overlay.show .bug-ticket-popup {
            transform: scale(1) translateY(0);
        }
        
        body[data-theme="dark"] .bug-ticket-popup {
            background: var(--sidebar-bg-dark);
            border-color: #ff5252;
        }
        
        .bug-ticket-popup-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #ff6b6b;
            text-shadow: 0 2px 4px rgba(255, 107, 107, 0.3);
        }
        
        body[data-theme="dark"] .bug-ticket-popup-title {
            color: #ff5252;
        }
        
        /* Game Suggestion Popup Styles */
        .game-suggestion-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 215, 0, 0.1);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            backdrop-filter: blur(5px);
        }
        
        .game-suggestion-popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        body[data-theme="dark"] .game-suggestion-popup-overlay {
            background: rgba(255, 215, 0, 0.15);
            backdrop-filter: blur(2px);
        }
        
        .game-suggestion-popup {
            background: var(--background-light);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 215, 0, 0.3);
            border: 2px solid #ffd700;
            transition: all 0.3s ease;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .game-suggestion-popup-overlay.show .game-suggestion-popup {
            transform: scale(1) translateY(0);
        }
        
        body[data-theme="dark"] .game-suggestion-popup {
            background: var(--sidebar-bg-dark);
            border-color: #ffed4e;
        }
        
        .game-suggestion-popup-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #ffd700;
            text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
        }
        
        body[data-theme="dark"] .game-suggestion-popup-title {
            color: #ffed4e;
        }
        
        /* Error text styling for all popups */
        .popup-error-text {
            color: #ff4444;
            font-size: 0.9rem;
            font-weight: 500;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            text-align: center;
            padding: 0.5rem;
            background: rgba(255, 68, 68, 0.1);
            border-radius: 8px;
            border: 1px solid rgba(255, 68, 68, 0.2);
        }
        
        body[data-theme="dark"] .popup-error-text {
            color: #ff6666;
            background: rgba(255, 68, 68, 0.15);
            border-color: rgba(255, 68, 68, 0.3);
        }
        
        .help-popup-btn {
            padding: 0.9rem 1.8rem;
            border: none;
            border-radius: 25px;
            font-size: 1.05rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 140px;
        }
        
        .help-popup-btn.create {
            background: linear-gradient(135deg, #009CFC, #0088e5);
            box-shadow: 0 4px 15px rgba(0, 156, 252, 0.3);
        }
        
        .help-popup-btn.create:hover {
            background: linear-gradient(135deg, #0088e5, #0077d1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 156, 252, 0.4);
        }
        
        .help-popup-btn.faq {
            background: linear-gradient(135deg, #A0AAFF, #8b9cff);
            box-shadow: 0 4px 15px rgba(160, 170, 255, 0.3);
        }
        
        .help-popup-btn.faq:hover {
            background: linear-gradient(135deg, #8b9cff, #7a8eff);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(160, 170, 255, 0.4);
        }
        
        .help-popup-close {
            background: #1565C0;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(21, 101, 192, 0.3);
        }
        
        .help-popup-close:hover {
            background: #0D47A1;
            transform: scale(1.08);
            box-shadow: 0 6px 20px rgba(13, 71, 161, 0.4);
        }
        
        /* Ticket Creation Popup */
        .ticket-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10006;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .ticket-popup-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        body[data-theme="dark"] .ticket-popup-overlay {
            backdrop-filter: blur(2px);
        }
        
        .ticket-popup {
            background: var(--background-light);
            color: var(--text-light);
            padding: 2.5rem;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            border: 2px solid var(--secondary);
            transition: all 0.3s ease;
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .ticket-popup-overlay.show .ticket-popup {
            transform: scale(1) translateY(0);
        }
        
        body[data-theme="dark"] .ticket-popup {
            background: var(--sidebar-bg-dark);
            color: var(--text-dark);
            border-color: var(--sidebar-border-dark);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }
        
        .ticket-popup-title {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 50%, #C97FFD 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .ticket-form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .ticket-form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-light);
        }
        
        body[data-theme="dark"] .ticket-form-label {
            color: var(--text-dark);
        }
        body[data-theme="fall"] .ticket-popup {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border-color: var(--fall-sidebar-border);
        }
        body[data-theme="fall"] .ticket-form-label {
            color: var(--fall-text);
        }
        body[data-theme="fall"] .ticket-form-input,
        body[data-theme="fall"] .ticket-form-textarea {
            background: var(--fall-sidebar-bg);
            color: var(--fall-text);
            border-color: var(--fall-sidebar-border);
        }
        
        .ticket-form-input,
        .ticket-form-textarea {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--background-light);
            color: var(--text-light);
            box-sizing: border-box;
            transition: border-color 0.3s ease;
        }
        
        .ticket-form-input:focus,
        .ticket-form-textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        body[data-theme="dark"] .ticket-form-input,
        body[data-theme="dark"] .ticket-form-textarea {
            background: var(--sidebar-bg-dark);
            color: var(--text-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        .ticket-form-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .ticket-form-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .ticket-form-btn {
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .ticket-form-btn.send {
            background: linear-gradient(135deg, #009CFC, #0088e5);
            color: white;
            box-shadow: 0 4px 15px rgba(0, 156, 252, 0.3);
        }
        
        .ticket-form-btn.send:hover {
            background: linear-gradient(135deg, #0088e5, #0077d1);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 156, 252, 0.4);
        }
        
        .ticket-form-btn.cancel {
            background: #6c757d;
            color: white;
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }
        
        .ticket-form-btn.cancel:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(108, 117, 125, 0.4);
        }
        
        /* Hall of Fame Button */
        .hall-of-fame-btn {
            position: fixed;
            left: 2.2rem;
            bottom: 2.2rem;
            z-index: 1000;
            background: linear-gradient(135deg, #ffd700, #ffed4e, #ffd700);
            color: #333;
            border: 3px solid #ffd700;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
            touch-action: manipulation;
            animation: hallOfFameGlow 3s ease-in-out infinite alternate;
            pointer-events: auto;
        }
        
        .hall-of-fame-btn:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700, #ffed4e);
            transform: scale(1.2) rotate(20deg);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.7), 0 0 30px rgba(255, 215, 0, 0.5);
            animation-play-state: paused;
        }
        
        .hall-of-fame-btn:active {
            transform: scale(1.1) rotate(10deg);
            transition: all 0.1s ease-out;
        }
        
        body[data-theme="dark"] .hall-of-fame-btn {
            background: linear-gradient(135deg, #ffd700, #ffed4e, #ffd700);
            color: #333;
            border: 3px solid #ffd700;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.4);
        }
        
        body[data-theme="dark"] .hall-of-fame-btn:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700, #ffed4e);
            transform: scale(1.2) rotate(20deg);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.6);
        }
        body[data-theme="fall"] .hall-of-fame-btn {
            background: linear-gradient(135deg, var(--fall-primary), var(--fall-secondary), var(--fall-primary));
            color: #fff;
            border: 3px solid var(--fall-accent);
            box-shadow: 0 8px 25px rgba(210, 105, 30, 0.6), 0 0 20px rgba(205, 133, 63, 0.4);
        }
        body[data-theme="fall"] .hall-of-fame-btn:hover {
            background: linear-gradient(135deg, var(--fall-secondary), var(--fall-primary), var(--fall-secondary));
            transform: scale(1.2) rotate(20deg);
            box-shadow: 0 12px 35px rgba(210, 105, 30, 0.8), 0 0 30px rgba(205, 133, 63, 0.6);
        }
        
        /* Hall of Fame Popup */
        .hall-of-fame-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10008;
            backdrop-filter: blur(5px);
        }
        
        .hall-of-fame-popup-overlay.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        body[data-theme="dark"] .hall-of-fame-popup-overlay {
            background: rgba(0, 0, 0, 0.9);
        }
        
        .hall-of-fame-popup {
            background: white;
            border-radius: 20px;
            padding: 2rem;
            max-width: 700px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
        }
        
        .hall-of-fame-popup-overlay.show .hall-of-fame-popup {
            animation: slideIn 0.3s ease;
        }
        
        body[data-theme="dark"] .hall-of-fame-popup {
            background: #2a2a2a;
            border: 1px solid #444;
        }
        body[data-theme="fall"] .hall-of-fame-popup {
            background: linear-gradient(135deg, var(--fall-sidebar-bg), var(--fall-sidebar-active));
            border: 2px solid var(--fall-sidebar-border);
            box-shadow: 0 20px 60px rgba(210, 105, 30, 0.3);
        }
        
        .hall-of-fame-popup-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: #ffd700;
            text-shadow: 0 2px 4px rgba(255, 215, 0, 0.3);
            text-align: center;
        }
        
        body[data-theme="dark"] .hall-of-fame-popup-title {
            color: #ffed4e;
        }
        
        .hall-of-fame-content {
            margin-bottom: 1rem;
        }
        
        .hall-of-fame-categories {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            justify-content: center;
        }
        
        .category-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #ffd700;
            background: transparent;
            color: #ffd700;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 0.9rem;
            width: 200px;
            text-align: center;
        }
        
        .category-btn:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-1px);
        }
        
        .category-btn.active {
            background: #ffd700;
            color: #333;
        }
        
        body[data-theme="dark"] .category-btn {
            border-color: #ffed4e;
            color: #ffed4e;
        }
        
        body[data-theme="dark"] .category-btn:hover {
            background: rgba(255, 237, 78, 0.1);
        }
        
        body[data-theme="dark"] .category-btn.active {
            background: #ffed4e;
            color: #333;
        }
        
        .hall-of-fame-list {
            max-height: 600px;
            overflow-y: auto;
        }
        
        .hof-section {
            display: none;
        }
        
        .hof-section.active {
            display: block;
        }
        
        .hof-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            margin-bottom: 0.5rem;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #dee2e6;
            transition: all 0.3s ease;
        }
        
        .hof-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .hof-item.gold {
            background: linear-gradient(135deg, #fff8e1, #ffecb3);
            border-left-color: #ffd700;
        }
        
        .hof-item.silver {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            border-left-color: #c0c0c0;
        }
        
        .hof-item.bronze {
            background: linear-gradient(135deg, #fff3e0, #ffcc80);
            border-left-color: #cd7f32;
        }
        
        .hof-item.achievement {
            background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
            border-left-color: #4caf50;
        }
        
        .hof-item.contributor {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            border-left-color: #2196f3;
        }
        
        body[data-theme="dark"] .hof-item {
            background: #3a3a3a;
            border-left-color: #666;
        }
        
        body[data-theme="dark"] .hof-item:hover {
            background: #4a4a4a;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        body[data-theme="dark"] .hof-item.gold {
            background: linear-gradient(135deg, #4a3a00, #6b4c00);
            border-left-color: #ffd700;
        }
        
        body[data-theme="dark"] .hof-item.silver {
            background: linear-gradient(135deg, #3a3a3a, #4a4a4a);
            border-left-color: #c0c0c0;
        }
        
        body[data-theme="dark"] .hof-item.bronze {
            background: linear-gradient(135deg, #4a2c00, #6b3d00);
            border-left-color: #cd7f32;
        }
        
        body[data-theme="dark"] .hof-item.achievement {
            background: linear-gradient(135deg, #1a3a1a, #2a4a2a);
            border-left-color: #4caf50;
        }
        
        body[data-theme="dark"] .hof-item.contributor {
            background: linear-gradient(135deg, #1a2a3a, #2a3a4a);
            border-left-color: #2196f3;
        }
        
        .hof-rank {
            font-size: 1.5rem;
            margin-right: 1rem;
            min-width: 40px;
            text-align: center;
        }
        
        .hof-info {
            flex: 1;
        }
        
        .hof-name {
            font-weight: 700;
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 0.25rem;
        }
        
        .hof-detail {
            font-size: 0.9rem;
            color: #666;
        }
        
        .hof-score {
            font-weight: 700;
            color: #ffd700;
            font-size: 1.1rem;
        }
        
        body[data-theme="dark"] .hof-name {
            color: #fff;
        }
        
        body[data-theme="dark"] .hof-detail {
            color: #ccc;
        }
        
        body[data-theme="dark"] .hof-score {
            color: #ffed4e;
        }
        
        .hall-of-fame-popup-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #999;
            transition: color 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }
        
        .hall-of-fame-popup-close:hover {
            color: #ff4444;
            background: rgba(255, 68, 68, 0.1);
        }
        
        body[data-theme="dark"] .hall-of-fame-popup-close {
            color: #ccc;
        }
        
        body[data-theme="dark"] .hall-of-fame-popup-close:hover {
            color: #ff6666;
            background: rgba(255, 68, 68, 0.2);
        }
        
        /* FAQ Popup */
        
        /* Games Section */
        .games-container {
            padding: 1.5rem;
            max-width: 1400px;
            margin: 0 auto;
            min-height: 400px;
            background: transparent;
        }
        
        body[data-theme="dark"] .games-container {
            background: transparent;
        }
        
        .games-search-section {
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            position: relative;
            gap: 1rem;
        }
        
        
        .games-search-bar {
            width: 100%;
            max-width: 500px;
            padding: 1rem 1.5rem;
            border: 3px solid transparent;
            border-radius: 30px;
            font-size: 1.1rem;
            background: 
                linear-gradient(var(--background-light), var(--background-light)) padding-box,
                linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%) border-box;
            background-size: 100% 100%, 400% 100%;
            color: var(--text-light);
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            outline: none;
            box-shadow: 0 4px 15px rgba(201, 127, 253, 0.1);
            animation: hubble-gradient-flow 12s linear infinite;
            position: relative;
        }
        
        @keyframes hubble-gradient-flow {
            0% { background-position: 0% 0%, 0% 0%; }
            100% { background-position: 0% 0%, 400% 0%; }
        }
        
        .games-search-bar.paused {
            animation-play-state: paused;
        }
        
        .games-search-bar:focus {
            box-shadow: 0 0 0 4px rgba(0, 156, 252, 0.15), 0 8px 25px rgba(201, 127, 253, 0.2);
            transform: translateY(-2px);
            background: 
                linear-gradient(#ffffff, #f8fbff) padding-box,
                linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%) border-box;
        }
        
        .games-search-bar::placeholder {
            color: var(--primary);
            opacity: 0.7;
            font-weight: 500;
        }
        
        body[data-theme="dark"] .games-search-bar {
            background: 
                linear-gradient(#232a3a, #1a1f2e) padding-box,
                linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%) border-box;
            background-size: 100% 100%, 400% 100%;
            color: #f7f8fa;
            box-shadow: 0 4px 15px rgba(201, 127, 253, 0.15);
            animation: hubble-gradient-flow 12s linear infinite;
        }
        
        body[data-theme="dark"] .games-search-bar:focus {
            background: 
                linear-gradient(#2a3142, #1e2332) padding-box,
                linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%) border-box;
            box-shadow: 0 0 0 4px rgba(0, 156, 252, 0.2), 0 8px 25px rgba(201, 127, 253, 0.25);
        }
        
        body[data-theme="dark"] .games-search-bar::placeholder {
            color: var(--accent);
            opacity: 0.8;
        }
        body[data-theme="fall"] .games-search-bar {
            background: 
                linear-gradient(var(--fall-sidebar-bg), var(--fall-sidebar-active)) padding-box,
                linear-gradient(90deg, var(--fall-primary) 0%, var(--fall-secondary) 25%, var(--fall-accent) 50%, var(--fall-primary) 75%, var(--fall-secondary) 100%) border-box;
            background-size: 100% 100%, 400% 100%;
            color: var(--fall-text);
            box-shadow: 0 4px 15px rgba(210, 105, 30, 0.2);
            animation: hubble-gradient-flow 12s linear infinite;
        }
        
        body[data-theme="fall"] .games-search-bar:focus {
            background: 
                linear-gradient(var(--fall-sidebar-active), var(--fall-primary)) padding-box,
                linear-gradient(90deg, var(--fall-primary) 0%, var(--fall-secondary) 25%, var(--fall-accent) 50%, var(--fall-primary) 75%, var(--fall-secondary) 100%) border-box;
            box-shadow: 0 0 0 4px rgba(210, 105, 30, 0.3), 0 8px 25px rgba(205, 133, 63, 0.3);
        }
        
        body[data-theme="fall"] .games-search-bar::placeholder {
            color: var(--fall-accent);
            opacity: 0.8;
        }
        
        /* Game Suggestion Button */
        .game-suggestion-btn {
            width: 50px;
            height: 50px;
            border: 3px solid #ff8c00;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .game-suggestion-btn:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700);
            border-color: #ff6b35;
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4);
        }
        
        .game-suggestion-btn:active {
            transform: scale(0.95) rotate(0deg);
            transition: all 0.1s ease-out;
        }
        
        body[data-theme="dark"] .game-suggestion-btn {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #333;
            border-color: #ff8c00;
        }
        
        body[data-theme="dark"] .game-suggestion-btn:hover {
            background: linear-gradient(135deg, #ffed4e, #ffd700);
            border-color: #ff6b35;
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-top: 1rem;
            min-height: 200px;
        }
        
        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin: 2rem 0 1rem 0;
            text-align: center;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .favorites-section {
            margin-bottom: 3rem;
        }
        
        .all-games-section {
            margin-bottom: 2rem;
        }
        
        .games-loading {
            grid-column: 1 / -1;
            text-align: center;
            color: var(--secondary);
            font-size: 1.1rem;
            padding: 2rem;
            font-style: italic;
        }
        
        .game-card {
            background: transparent;
            border-radius: 16px;
            padding: 0;
            box-shadow: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
        }
        
        .game-card:hover {
            transform: translateY(-2px);
            box-shadow: none;
        }
        
        body[data-theme="dark"] .game-card {
            background: transparent;
            border: none;
            box-shadow: none;
        }
        
        body[data-theme="dark"] .game-card:hover {
            box-shadow: none;
        }
 .game-card {
            background: transparent;
            border: none;
            box-shadow: none;
            border-radius: 16px;
        }
 .game-card:hover {
            box-shadow: none;
            transform: translateY(-3px);
        }
        body[data-theme="fall"] .game-card {
            background: transparent;
            border: none;
            box-shadow: none;
        }
        body[data-theme="fall"] .game-card:hover {
            box-shadow: none;
        }
        
        .game-image {
            width: 100%;
            height: 180px;
            border-radius: 12px;
            object-fit: cover;
            margin-bottom: 0.1rem;
            background: var(--background-light);
            border: 2px solid var(--secondary);
            transition: border-color 0.3s ease;
            flex-shrink: 0;
            display: block;
        }
        
        .game-image-placeholder {
            width: 100%;
            height: 180px;
            border-radius: 12px;
            margin-bottom: 0.1rem;
            border: 2px solid var(--secondary);
            transition: border-color 0.3s ease;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }
        
        .game-image-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, var(--placeholder-bg, #FF6384), var(--placeholder-bg-secondary, #FF8FA3));
            z-index: -1;
        }
        
        .game-image-placeholder::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: placeholder-shine 3s ease-in-out infinite;
            z-index: 0;
        }
        
        @keyframes placeholder-shine {
            0%, 100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .game-image-placeholder .placeholder-text {
            position: relative;
            z-index: 1;
            text-align: center;
            line-height: 1;
        }
        
        body[data-theme="dark"] .game-image {
            background: #232a3a;
            border-color: #2c3550;
        }
        
        body[data-theme="dark"] .game-image-placeholder {
            border-color: #2c3550;
        }
        
        body[data-theme="dark"] .game-image-placeholder::before {
            background: linear-gradient(135deg, var(--placeholder-bg, #4A5568), var(--placeholder-bg-secondary, #2D3748));
        }
        
        .game-card:hover .game-image {
            border-color: var(--primary);
        }
        
        .game-card:hover .game-image-placeholder {
            border-color: var(--primary);
        }
        
        .game-name {
            color: var(--text-light);
            font-size: 1.4rem;
            font-weight: 600;
            text-align: center;
            margin: 0;
            line-height: 1.2;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
        }
        
        body[data-theme="dark"] .game-name {
            color: var(--text-dark);
        }
        body[data-theme="fall"] .game-name {
            color: var(--fall-text);
        }
        /* Coming Soon Game Card */
.game-card.coming-soon {
    position: relative;
    background: transparent;
    border-radius: 16px;
    padding: 0;
    aspect-ratio: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    cursor: default;
}

.game-card.coming-soon .game-image-placeholder {
    width: 100%;
    height: 180px;
    border-radius: 12px;
    border: 2px dashed var(--secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    font-weight: bold;
    color: var(--secondary);
    background: rgba(0,0,0,0.3);
    text-transform: uppercase;
    letter-spacing: 2px;
}

/* Optional hover effect for "Coming Soon" */
.game-card.coming-soon:hover .game-image-placeholder {
    border-color: var(--accent);
    color: var(--accent);
    background: rgba(0,0,0,0.4);
}

/* Coming Soon Overlay for games with images */
.game-card.coming-soon .game-image {
    width: 100%;
    height: 180px;
    border-radius: 12px;
    object-fit: cover;
    margin-bottom: 0.1rem;
    border: 2px solid var(--secondary);
    background: rgba(0,0,0,0.3);
    transition: border-color 0.3s ease;
    flex-shrink: 0;
    display: block;
    position: relative;
    overflow: hidden;
}

.game-card.coming-soon .game-image::after {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: placeholder-shine 3s ease-in-out infinite;
    z-index: 0;
    pointer-events: none;
}

.game-card.coming-soon::after {
    content: 'Coming Soon';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 1rem;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
    z-index: 10;
    pointer-events: none;
    border: 2px solid var(--accent);
}


        
        /* Game Fullscreen */
        .game-fullscreen {
            position: fixed;
            top: 56px;
            left: 0;
            width: 100%;
            height: calc(100vh - 56px);
            background: var(--background-light);
            z-index: 9999;
            display: none;
            flex-direction: column;
        }
        
        .game-fullscreen.tab-fullscreen {
            top: 0;
            height: 100vh;
        }
        
        body[data-theme="dark"] .game-fullscreen {
            background: #0a0e1a;
        }
        
        .game-content {
            flex: 1;
            width: 100%;
            height: 100%;
            border: none;
            background: var(--background-light);
        }
        
        body[data-theme="dark"] .game-content {
            background: #1a1f2e;
        }
        
        .topbar.game-mode .hubble-gradient {
            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 50%, #C97FFD 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            color: transparent;
        }
        
        /* Game mode forces dark theme for header */
        .topbar.game-mode {
            background: #20263a;
            box-shadow: 0 2px 12px rgba(0,0,0,0.13);
        }
        
        /* Seasonal themes in game mode */
        body[data-theme="fall"] .topbar.game-mode {
            background: var(--fall-dark-sidebar-bg);
            box-shadow: 0 2px 12px rgba(255,140,0,0.15);
        }
        
        body[data-theme="fall-dark"] .topbar.game-mode {
            background: var(--fall-dark-sidebar-bg);
            box-shadow: 0 2px 12px rgba(255,140,0,0.15);
        }
        
        body[data-theme="winter"] .topbar.game-mode {
            background: var(--winter-dark-sidebar-bg);
            box-shadow: 0 2px 12px rgba(135,206,235,0.15);
        }
        
        body[data-theme="winter-dark"] .topbar.game-mode {
            background: var(--winter-dark-sidebar-bg);
            box-shadow: 0 2px 12px rgba(135,206,235,0.15);
        }
        
        
        .game-controls {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            gap: 1rem;
            z-index: 1000;
        }
        
        .game-fullscreen-btn {
            width: 200px;
            max-width: 20vw;
            min-width: 120px;
            border: 1.5px solid #1565C0;
            border-radius: 25px;
            font-size: 1.08rem;
            padding: 0.5rem 1.1rem;
            background: #1565C0;
            color: white;
            outline: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .game-fullscreen-btn:hover {
            background: #0D47A1;
            border-color: #0D47A1;
            transform: scale(1.05);
        }
        
        .game-fullscreen-btn.minimized {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 100px;
            min-width: 100px;
            max-width: 100px;
            font-size: 0.9rem;
            padding: 0.4rem 0.8rem;
            transform: none;
            z-index: 10000;
        }
        
        .game-fullscreen-btn.minimized.true-fullscreen {
            left: 140px; /* Position next to the back button (100px width + 20px margin) */
        }
        
        .game-exit-btn {
            width: 200px;
            max-width: 20vw;
            min-width: 120px;
            border: 1.5px solid #f44336;
            border-radius: 25px;
            font-size: 1.08rem;
            padding: 0.5rem 1.1rem;
            background: #f44336;
            color: white;
            outline: none;
            cursor: pointer;
            transition: all 0.18s ease;
        }
        
        .game-exit-btn:hover {
            background: #d32f2f;
            border-color: #d32f2f;
            transform: scale(1.05);
        }
        
        @media (max-width: 1200px) {
            .games-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Hall of Fame List Styling */
        .people-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            max-width: 800px;
            margin: 0 auto;
        }
        
        /* Cheats Section Styling */
        .hacks-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .cheats-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .cheats-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .cheats-subtitle {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 0;
        }
        
        body[data-theme="dark"] .cheats-subtitle {
            color: var(--text-dark);
        }
        
        .cheats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .hack-item {
            background: var(--sidebar-bg-light);
            border: 2px solid var(--sidebar-border-light);
            border-radius: 16px;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .hack-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-color: var(--primary);
        }
        
        body[data-theme="dark"] .hack-item {
            background: var(--sidebar-bg-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .hack-item:hover {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .hack-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--primary);
        }
        
        .hack-description {
            font-size: 1rem;
            color: var(--text-light);
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        
        body[data-theme="dark"] .hack-description {
            color: var(--text-dark);
        }
        
        .download-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 156, 252, 0.4);
        }
        
        .download-btn:active {
            transform: translateY(0);
        }
        
        .download-btn.disabled {
            background: #ccc;
            color: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .download-btn.disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        
        .person-item {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--sidebar-bg-light);
            border: 1px solid var(--sidebar-border-light);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .person-item:hover {
            background: var(--sidebar-active-light);
            transform: translateX(5px);
        }
        
        .person-avatar {
            font-size: 2.5rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .person-info {
            flex: 1;
        }
        
        .person-name {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.3rem;
        }
        
        .person-role {
            font-size: 1rem;
            color: var(--secondary);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .person-description {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }
        
        /* Dark theme adjustments */
        body[data-theme="dark"] .person-item {
            background: var(--sidebar-bg-dark);
            border-color: var(--sidebar-border-dark);
        }
        
        body[data-theme="dark"] .person-item:hover {
            background: var(--sidebar-active-dark);
        }
        
        body[data-theme="dark"] .person-description {
            color: #ccc;
        }
        
        @media (max-width: 900px) {
            .main-content { 
                padding: 1.2rem 0.7rem; 
            }
            .hubble-gradient { 
                margin-left: 1rem; 
                font-size: 1.3rem; 
            }
            .games-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .search-bar-custom {
                width: 200px;
                max-width: 35vw;
                min-width: 100px;
            }
        }
        
        @media (max-width: 600px) {
            .main-content { 
                padding: 1rem 0.2rem; 
            }
            .games-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            .search-bar-custom {
                width: 150px;
                max-width: 30vw;
                min-width: 80px;
            }
            .theme-toggle { right: 1rem; bottom: 1rem; }
            .bug-button { left: 1rem; bottom: 1rem; }
            .hall-of-fame-btn { left: 1rem; bottom: 1rem; }
        }
        
        /* Username Change Popup Styles */
        .customization-popup {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 10004;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .customization-popup.show {
            opacity: 1;
            visibility: visible;
        }
        .customization-popup-bg {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .customization-popup.show .customization-popup-bg {
            opacity: 1;
        }
        .customization-popup-content {
            position: relative;
            background: #fff;
            color: #222;
            border-radius: 16px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            z-index: 2;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            transform: scale(0.8) translateY(20px);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .customization-popup.show .customization-popup-content {
            transform: scale(1) translateY(0);
        }
        body[data-theme="dark"] .customization-popup-content {
            background: #232a3a;
            color: #f7f8fa;
        }
        .customization-popup-content h3 {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1.5rem;
            text-align: center;
        }
        .popup-input-group {
            margin-bottom: 1.2rem;
        }
        .popup-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: inherit;
        }
        .popup-input-group input {
            width: 100%;
            padding: 0.8rem;
            border: 1.5px solid var(--secondary);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--background-light);
            color: var(--text-light);
            box-sizing: border-box;
        }
        .popup-input-group input:focus {
            border-color: var(--primary);
            outline: none;
        }
        body[data-theme="dark"] .popup-input-group input {
            background: #232a3a;
            color: #f7f8fa;
            border-color: #2c3550;
        }
        .popup-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .popup-btn {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.18s;
        }
        .popup-btn.secondary {
            background: #e0e6f7;
            color: var(--primary);
        }
        .popup-btn.primary {
            background: linear-gradient(90deg, var(--primary), var(--accent));
            color: #fff;
        }
        .popup-btn:hover {
            transform: scale(1.02);
        }
        .popup-btn.disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        .confirmation-message {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        body[data-theme="dark"] .confirmation-message {
            background: #2d2a1a;
            border-color: #4a3f1a;
            color: #f7f8fa;
        }
        .confirmation-message p {
            margin: 0.5rem 0;
        }
        .confirmation-message p:first-child {
            margin-top: 0;
        }
        .confirmation-message p:last-child {
            margin-bottom: 0;
        }
        .timer-circle {
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            margin-right: 0.5rem;
        }
        .timer-svg {
            position: absolute;
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        .timer-bg {
            fill: none;
            stroke: rgba(255,255,255,0.3);
            stroke-width: 2;
            stroke-dasharray: 100 100;
        }
        .timer-progress {
            fill: none;
            stroke: #fff;
            stroke-width: 2;
            stroke-dasharray: 0 100;
            transition: stroke-dasharray 0.1s linear;
        }
        .timer-text {
            font-size: 0.8rem;
            font-weight: 700;
            color: #fff;
        }
        
        /* Customization Notifications */
        .customization-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10001;
            font-weight: 600;
            animation: slideInRight 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes slideInRight {
            from {
                transform: translateX(100%) scale(0.8);
                opacity: 0;
            }
            to {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="topbar">
        <span class="hubble-gradient">Hubble<span class="alpha-badge" id="alpha-badge">Beta</span></span>
    </div>
    <div class="layout">
        <nav class="sidebar" id="sidebar">
            <button class="nav-item active" data-section="games">Games</button>
            <button class="nav-item" data-section="music">Music</button>
            <button class="nav-item" data-section="hacks">Cheats</button>
            <button class="nav-item" data-section="hall-of-fame">Hall of Fame</button>
        </nav>
        <main class="main-content" id="main-content">
            <div class="games-container">
                <div class="games-search-section">
                    <input type="text" id="games-search" class="games-search-bar" placeholder="Search through our games..." autocomplete="off">
                </div>
                
                <!-- Our Favorites Section -->
                <div class="favorites-section" id="favorites-section">
                    <h2 class="section-title">Our Favorites</h2>
                    <div class="games-grid" id="favorites-grid">
                        <div class="games-loading">Loading favorites...</div>
                    </div>
                </div>
                
                <!-- All Games Section -->
                <div class="all-games-section" id="all-games-section">
                    <h2 class="section-title">All Games</h2>
                    <div class="games-grid" id="games-grid">
                        <div class="games-loading">Loading games...</div>
                    </div>
                </div>
            </div>
            
            <!-- Music Player Section -->
            <div class="music-container" id="music-container" style="display: none;">
                <div class="music-header">
                    <h2 class="music-title">Music Player</h2>
                    <p class="music-subtitle">Choose a track to play or add your own</p>
                </div>
                
                <!-- Music Library -->
                <div class="music-library" id="music-library">
                    <!-- Music tracks will be populated by JavaScript -->
                </div>
                
                <div class="music-input-section">
                    <h3 class="input-section-title">Add Custom Music</h3>
                    <div class="url-input-container">
                        <input type="url" id="music-url-input" class="music-url-input" placeholder="https://example.com/music.mp3" autocomplete="off">
                        <button id="load-music-btn" class="load-music-btn">Load Music</button>
                    </div>
                </div>
                
                <div class="music-player" id="music-player" style="display: none;">
                    <div class="player-info">
                        <div class="track-info">
                            <h3 id="track-title" class="track-title">Unknown Track</h3>
                            <p id="track-url" class="track-url"></p>
                        </div>
                    </div>
                    
                    <div class="player-controls">
                        <button id="play-pause-btn" class="control-btn play-btn">▶️</button>
                        <button id="stop-btn" class="control-btn stop-btn">⏹️</button>
                        <button id="volume-btn" class="control-btn volume-btn">🔊</button>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill"></div>
                        </div>
                        <div class="time-display">
                            <span id="current-time">0:00</span>
                            <span id="total-time">0:00</span>
                        </div>
                    </div>
                    
                    <div class="volume-container">
                        <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="100">
                        <span id="volume-display" class="volume-display">100%</span>
                    </div>
                </div>
                
                <audio id="audio-player" preload="none"></audio>
            </div>
            
            <!-- Hall of Fame Section -->
            <div class="hall-of-fame-container" id="hall-of-fame-container" style="display: none;">
                <div class="hall-of-fame-header">
                    <h2 class="hall-of-fame-title">🏆 Hall of Fame</h2>
                    <p class="hall-of-fame-subtitle">People we appreciate and admire</p>
                </div>
                
                <div class="hall-of-fame-content">
                    <div class="people-list">
                        <div class="person-item">
                            <div class="person-avatar">⌨️</div>
                            <div class="person-info">
                                <div class="person-name">Issy & Penut</div>
                                <div class="person-role">The brilliant minds behind Hubble</div>
                            </div>
                        </div>
                        
                        <div class="person-item">
                            <div class="person-avatar">☄️</div>
                            <div class="person-info">
                                <div class="person-name">Alpha Testers</div>
                                <div class="person-role">The dedicated testers who help us improve Hubble with their valuable feedback and bug reports.</div>
                            </div>
                        </div>

                        <div class="person-item">
                            <div class="person-avatar">🤪</div>
                            <div class="person-info">
                                <div class="person-name">Travis</div>
                                <div class="person-role">Got I.S.S. on the 4th week of School</div>
                            </div>
                        </div>
                        <div class="person-item">
                            <div class="person-avatar">🥊</div>
                            <div class="person-info">
                                <div class="person-name">Nessa</div>
                                <div class="person-role">Got Travis I.S.S. on the 4th week of School</div>
                            </div>
                        </div>
                         <div class="person-item">
                            <div class="person-avatar">🐶</div>
                            <div class="person-info">
                                <div class="person-name">Allie</div>
                                <div class="person-role">Has a cool dog</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Cheats Section -->
            <div class="hacks-container" id="hacks-container" style="display: none;">
                <div class="cheats-header">
                    <h2 class="cheats-title">Cheats</h2>
                    <p class="cheats-subtitle">Educational tools and utilities</p>
                </div>
                <div class="hacks-content">
                    <div class="cheats-grid">
                        <!-- Kitty-Tools -->
                        <div class="hack-item">
                            <div class="hack-info">
                                <h3 class="hack-name">Kitty-Tools</h3>
                                <p class="hack-description">A Kahoot hack that actually works. Requires quiz ID to use.</p>
                            </div>
                            <button class="download-btn" onclick="downloadKittyTools()">
                                Download
                            </button>
                        </div>
                        
                        <!-- Blooket Cheats -->
                        <div class="hack-item">
                            <div class="hack-info">
                                <h3 class="hack-name">Blooket Cheats</h3>
                                <p class="hack-description">Bookmark-based cheats for Blooket games.</p>
                            </div>
                            <button class="download-btn" onclick="downloadBlooketCheats()">
                                Download
                            </button>
                        </div>
                        
                        <!-- Coming Soon -->
                        <div class="hack-item">
                            <div class="hack-info">
                                <h3 class="hack-name">Coming Soon</h3>
                                <p class="hack-description">More tools and cheats coming soon!</p>
                            </div>
                            <button class="download-btn disabled" disabled>
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <button class="theme-toggle" id="theme-toggle" title="Toggle theme">🌙</button>
    
    <!-- Falling leaves container for fall theme -->
    <div class="falling-leaves" id="falling-leaves"></div>
    
    <!-- Snowflakes container for winter theme -->
    <div class="snowflakes" id="snowflakes"></div>
    
    
    
    
    
    <!-- Game Suggestion -->
    <div class="game-suggestion-popup-overlay" id="game-suggestion-popup-overlay">
        <div class="game-suggestion-popup">
            <h2 class="game-suggestion-popup-title" id="game-suggestion-popup-title">💡 Suggest a Game</h2>
            <div id="game-suggestion-error-text" class="popup-error-text" style="display: none;"></div>
            <div id="game-suggestion-form-content">
                <div class="ticket-form-group">
                    <label for="game-suggestion-title" class="ticket-form-label">Game Title</label>
                    <input type="text" id="game-suggestion-title" class="ticket-form-input" placeholder="Enter the name of the game you'd like to suggest">
                </div>
                <div class="ticket-form-group">
                    <label for="game-suggestion-description" class="ticket-form-label">Tell us a bit about the game <span style="color: #888; font-weight: normal;">(Optional)</span></label>
                    <textarea id="game-suggestion-description" class="ticket-form-textarea" placeholder="Tell us about the game so we can know more about what we're adding to Hubble... (Optional)"></textarea>
                </div>
                <div class="ticket-form-group">
                    <label for="game-suggestion-link" class="ticket-form-label">Game Link <span style="color: #888; font-weight: normal;">(If Applicable)</span></label>
                    <input type="url" id="game-suggestion-link" class="ticket-form-input" placeholder="https://example.com/game (Optional)">
                </div>
                <div class="ticket-form-buttons">
                    <button class="ticket-form-btn cancel" onclick="closeGameSuggestionPopup()">Cancel</button>
                    <button class="ticket-form-btn send" onclick="sendGameSuggestion()">Submit Suggestion</button>
                </div>
            </div>
            <div id="game-suggestion-sent-content" style="display: none; text-align: center;">
                <h3 style="color: #ffd700; margin-bottom: 1rem;">Suggestion Submitted!</h3>
                <p style="margin-bottom: 2rem;">Thank you for your game suggestion! We'll review it and consider adding it to Hubble.</p>
                <button class="ticket-form-btn send" onclick="closeAllPopups()">Close</button>
            </div>
        </div>
    </div>
    
    <!-- Hall of Fame -->
    <div class="hall-of-fame-popup-overlay" id="hall-of-fame-popup-overlay">
        <div class="hall-of-fame-popup">
            <h2 class="hall-of-fame-popup-title">🏆 Hall of Fame</h2>
            <div class="hall-of-fame-content">
                <div class="hall-of-fame-categories">
                    <button class="category-btn active" data-category="top-players">Most Goated Users</button>
                </div>
                
                <div class="hall-of-fame-list" id="hall-of-fame-list">
                    <!-- Most Goated Users -->
                    <div class="hof-section active" id="top-players">
                        <div class="hof-item gold">
                            <div class="hof-rank">🥇</div>
                            <div class="hof-info">
                                <div class="hof-name">Mally</div>
                                <div class="hof-detail">Added all games</div>
                            </div>
                        </div>
                        <div class="hof-item silver">
                            <div class="hof-rank">🥈</div>
                            <div class="hof-info">
                                <div class="hof-name">exoflex6</div>
                                <div class="hof-detail">Built the entire site</div>
                            </div>
                        </div>
                        <div class="hof-item bronze">
                            <div class="hof-rank">🥉</div>
                            <div class="hof-info">
                                <div class="hof-name">Untaken</div>
                                <div class="hof-detail">Reason is super crazy...</div>
                            </div>
                        </div>
                        <div class="hof-item">
                            <div class="hof-rank">4</div>
                            <div class="hof-info">
                                <div class="hof-name">Untaken</div>
                                <div class="hof-detail">Reason is super crazy...</div>
                            </div>
                        </div>
                        <div class="hof-item">
                            <div class="hof-rank">5</div>
                            <div class="hof-info">
                                <div class="hof-name">Untaken</div>
                                <div class="hof-detail">Reason is super crazy...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <button class="hall-of-fame-popup-close" onclick="closeHallOfFamePopup()">×</button>
        </div>
    </div>
    
    <!-- Game Fullscreen -->
    <div class="game-fullscreen" id="game-fullscreen">
        <iframe class="game-content" id="game-content" src=""></iframe>
    </div>
    
    
    <!-- Confetti -->
    <div class="confetti-container" id="confetti-container"></div>
    
    <script>
        // Bug Report Functions
        function showBugPopup() {
            const popup = document.getElementById('bug-popup-overlay');
            if (popup) {
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.classList.add('show');
                }, 10);
            }
        }
        
        function closeBugPopup() {
            const popup = document.getElementById('bug-popup-overlay');
            if (popup) {
                popup.classList.remove('show');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        function showBugTicketPopup() {
            closeBugPopup();
            const popup = document.getElementById('bug-ticket-popup-overlay');
            const formContent = document.getElementById('bug-ticket-form-content');
            const sentContent = document.getElementById('bug-ticket-sent-content');
            const errorText = document.getElementById('bug-ticket-error-text');
            
            if (popup) {
                // Reset form and hide error
                document.getElementById('bug-ticket-subject').value = '';
                document.getElementById('bug-ticket-description').value = '';
                errorText.style.display = 'none';
                
                // Show form, hide sent message
                formContent.style.display = 'block';
                sentContent.style.display = 'none';
                
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.classList.add('show');
                }, 10);
            }
        }
        
        function closeBugTicketPopup() {
            const popup = document.getElementById('bug-ticket-popup-overlay');
            if (popup) {
                popup.classList.remove('show');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        function showTicketPopup() {
            closeBugPopup();
            const popup = document.getElementById('ticket-popup-overlay');
            const formContent = document.getElementById('ticket-form-content');
            const sentContent = document.getElementById('ticket-sent-content');
            const errorText = document.getElementById('ticket-error-text');
            
            if (popup) {
                // Reset form and hide error
                formContent.style.display = 'block';
                sentContent.style.display = 'none';
                document.getElementById('ticket-subject').value = '';
                document.getElementById('ticket-description').value = '';
                document.getElementById('ticket-email').value = '';
                errorText.style.display = 'none';
                
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.classList.add('show');
                }, 10);
            }
        }
        
        function closeTicketPopup() {
            const popup = document.getElementById('ticket-popup-overlay');
            if (popup) {
                popup.classList.remove('show');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        async function sendTicket() {
            const subject = document.getElementById('ticket-subject').value.trim();
            const description = document.getElementById('ticket-description').value.trim();
            const email = document.getElementById('ticket-email').value.trim();
            const errorText = document.getElementById('ticket-error-text');
            
            // Clear error
            errorText.style.display = 'none';
            
            // Basic validation
            if (!subject || !description || !email) {
                errorText.textContent = 'Please fill in all fields.';
                errorText.style.display = 'block';
                return;
            }
            
            // Email validation
            if (!email.includes('@lwsd.org')) {
                errorText.textContent = 'Please enter a valid LWSD email address.';
                errorText.style.display = 'block';
                return;
            }
            
            try {
                console.log('Starting ticket submission...');
                
                // Save ticket to Firebase
                const { getFirestore, collection, addDoc } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
                const { app } = await import('./firebase.js');
                const db = getFirestore(app);
                
                console.log('Firebase modules loaded, creating ticket data...');
                
                const ticketData = {
                    subject: subject,
                    description: description,
                    email: email,
                    timestamp: new Date(),
                    status: 'open',
                    priority: 'normal'
                };
                
                console.log('Ticket data prepared:', ticketData);
                console.log('Attempting to save to Firebase...');
                
                const docRef = await addDoc(collection(db, 'tickets'), ticketData);
                console.log('Ticket saved with ID:', docRef.id);
                
                // Show sent confirmation
                const formContent = document.getElementById('ticket-form-content');
                const sentContent = document.getElementById('ticket-sent-content');
                
                formContent.style.display = 'none';
                sentContent.style.display = 'block';
                
                console.log('Ticket submitted successfully to Firebase');
            } catch (error) {
                console.error('Error submitting ticket:', error);
                console.error('Error details:', {
                    message: error.message,
                    code: error.code,
                    stack: error.stack
                });
                
                // Handle specific error cases
                let errorMessage = 'Failed to submit ticket. Please try again.';
                if (error.code === 'permission-denied' || error.code === 'unavailable') {
                    errorMessage = 'Service temporarily unavailable. Please try again later.';
                } else if (error.message) {
                    errorMessage = `Failed to submit ticket: ${error.message}`;
                }
                
                errorText.textContent = errorMessage;
                errorText.style.display = 'block';
            }
        }
        
        async function sendBugTicket() {
            const subject = document.getElementById('bug-ticket-subject').value.trim();
            const description = document.getElementById('bug-ticket-description').value.trim();
            const errorText = document.getElementById('bug-ticket-error-text');
            
            // Clear error
            errorText.style.display = 'none';
            
            // Basic validation
            if (!subject || !description) {
                errorText.textContent = 'Please fill in all fields.';
                errorText.style.display = 'block';
                return;
            }
            
            if (!currentUser) {
                errorText.textContent = 'You must be logged in to submit a bug report.';
                errorText.style.display = 'block';
                return;
            }
            
            try {
                console.log('Starting bug ticket submission...');
                
                // Save bug ticket to Firebase
                const { getFirestore, collection, addDoc, query, where, getDocs } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
                const { app } = await import('./firebase.js');
                const db = getFirestore(app);
                
                console.log('Firebase modules loaded, getting user data...');
                
                // Get user data
                const userQuery = query(collection(db, "users"), where("email", "==", currentUser.email));
                const userDocs = await getDocs(userQuery);
                let username = 'User';
                
                if (!userDocs.empty) {
                    const userData = userDocs.docs[0].data();
                    username = userData.username || 'User';
                }
                
                const bugTicketData = {
                    subject: subject,
                    description: description,
                    email: currentUser.email,
                    username: username,
                    uid: currentUser.uid,
                    timestamp: new Date(),
                    status: 'open',
                    priority: 'normal',
                    type: 'bug'
                };
                
                console.log('Bug ticket data prepared:', bugTicketData);
                console.log('Attempting to save to Firebase...');
                
                const docRef = await addDoc(collection(db, 'bugs'), bugTicketData);
                console.log('Bug ticket saved with ID:', docRef.id);
                
                // Show sent confirmation
                const formContent = document.getElementById('bug-ticket-form-content');
                const sentContent = document.getElementById('bug-ticket-sent-content');
                
                formContent.style.display = 'none';
                sentContent.style.display = 'block';
                
                console.log('Bug ticket submitted successfully to Firebase');
            } catch (error) {
                console.error('Error submitting bug ticket:', error);
                console.error('Error details:', {
                    message: error.message,
                    code: error.code,
                    stack: error.stack
                });
                
                // Handle specific error cases
                let errorMessage = 'Failed to submit bug ticket. Please try again.';
                if (error.code === 'permission-denied' || error.code === 'unavailable') {
                    errorMessage = 'Service temporarily unavailable. Please try again later.';
                } else if (error.message) {
                    errorMessage = `Failed to submit bug ticket: ${error.message}`;
                }
                
                errorText.textContent = errorMessage;
                errorText.style.display = 'block';
            }
        }

        
        function closeAllPopups() {
            closeBugPopup();
            closeBugTicketPopup();
            closeTicketPopup();
            closeGameSuggestionPopup();
            closeHallOfFamePopup();
        }
        
        // Game Suggestion
        function showGameSuggestionPopup() {
            const popup = document.getElementById('game-suggestion-popup-overlay');
            const formContent = document.getElementById('game-suggestion-form-content');
            const sentContent = document.getElementById('game-suggestion-sent-content');
            const errorText = document.getElementById('game-suggestion-error-text');
            
            if (popup) {
                // Reset form and hide error
                document.getElementById('game-suggestion-title').value = '';
                document.getElementById('game-suggestion-description').value = '';
                document.getElementById('game-suggestion-link').value = '';
                errorText.style.display = 'none';
                
                // Show form, hide sent message
                formContent.style.display = 'block';
                sentContent.style.display = 'none';
                
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.classList.add('show');
                }, 10);
            }
        }
        
        function closeGameSuggestionPopup() {
            const popup = document.getElementById('game-suggestion-popup-overlay');
            if (popup) {
                popup.classList.remove('show');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        async function sendGameSuggestion() {
            const title = document.getElementById('game-suggestion-title').value.trim();
            const description = document.getElementById('game-suggestion-description').value.trim();
            const link = document.getElementById('game-suggestion-link').value.trim();
            const errorText = document.getElementById('game-suggestion-error-text');
            
            // Clear error
            errorText.style.display = 'none';
            
            // Basic validation - only title is required
            if (!title) {
                errorText.textContent = 'Please enter a game title.';
                errorText.style.display = 'block';
                return;
            }
            
            if (!currentUser) {
                errorText.textContent = 'You must be logged in to submit a game suggestion.';
                errorText.style.display = 'block';
                return;
            }
            
            try {
                console.log('Starting game suggestion submission...');
                
                // Save game suggestion to Firebase
                const { getFirestore, collection, addDoc, query, where, getDocs } = await import('https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore.js');
                const { app } = await import('./firebase.js');
                const db = getFirestore(app);
                
                console.log('Firebase modules loaded, getting user data...');
                
                // Get user data
                const userQuery = query(collection(db, "users"), where("email", "==", currentUser.email));
                const userDocs = await getDocs(userQuery);
                let username = 'User';
                
                if (!userDocs.empty) {
                    const userData = userDocs.docs[0].data();
                    username = userData.username || 'User';
                }
                
                const gameSuggestionData = {
                    title: title,
                    description: description || '', // Make description optional
                    link: link || '', // Make link optional
                    email: currentUser.email,
                    username: username,
                    uid: currentUser.uid,
                    timestamp: new Date(),
                    status: 'pending',
                    type: 'game_suggestion'
                };
                
                console.log('Game suggestion data prepared:', gameSuggestionData);
                console.log('Attempting to save to Firebase...');
                
                const docRef = await addDoc(collection(db, 'gamesuggestions'), gameSuggestionData);
                console.log('Game suggestion saved with ID:', docRef.id);
                
                // Show sent confirmation
                const formContent = document.getElementById('game-suggestion-form-content');
                const sentContent = document.getElementById('game-suggestion-sent-content');
                
                formContent.style.display = 'none';
                sentContent.style.display = 'block';
                
                console.log('Game suggestion submitted successfully to Firebase');
            } catch (error) {
                console.error('Error submitting game suggestion:', error);
                console.error('Error details:', {
                    message: error.message,
                    code: error.code,
                    stack: error.stack
                });
                
                // Handle specific error cases
                let errorMessage = 'Failed to submit game suggestion. Please try again.';
                if (error.code === 'permission-denied' || error.code === 'unavailable') {
                    errorMessage = 'Service temporarily unavailable. Please try again later.';
                } else if (error.message) {
                    errorMessage = `Failed to submit game suggestion: ${error.message}`;
                }
                
                errorText.textContent = errorMessage;
                errorText.style.display = 'block';
            }
        }
        
        // Hall of Fame
        function showHallOfFamePopup() {
            const popup = document.getElementById('hall-of-fame-popup-overlay');
            if (popup) {
                popup.style.display = 'flex';
                setTimeout(() => {
                    popup.classList.add('show');
                }, 10);
            }
        }
        
        function closeHallOfFamePopup() {
            const popup = document.getElementById('hall-of-fame-popup-overlay');
            if (popup) {
                popup.classList.remove('show');
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }
        }
        
        function switchHallOfFameCategory(category) {
            // Remove active class from all category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            // Hide all sections
            document.querySelectorAll('.hof-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(category).classList.add('active');
        }
        
        // Close popups on outside click
        document.addEventListener('click', function(e) {
            // Bug popup
            const bugPopup = document.getElementById('bug-popup-overlay');
            if (bugPopup && e.target === bugPopup) {
                closeBugPopup();
            }
            
            // Bug ticket popup
            const bugTicketPopup = document.getElementById('bug-ticket-popup-overlay');
            const bugSentContent = document.getElementById('bug-ticket-sent-content');
            if (bugTicketPopup && e.target === bugTicketPopup && bugSentContent.style.display === 'none') {
                closeBugTicketPopup();
            }
            
            // Game suggestion popup
            const gameSuggestionPopup = document.getElementById('game-suggestion-popup-overlay');
            const gameSuggestionSentContent = document.getElementById('game-suggestion-sent-content');
            if (gameSuggestionPopup && e.target === gameSuggestionPopup && gameSuggestionSentContent.style.display === 'none') {
                closeGameSuggestionPopup();
            }
            
            
            // Ticket popup
            const ticketPopup = document.getElementById('ticket-popup-overlay');
            const sentContent = document.getElementById('ticket-sent-content');
            if (ticketPopup && e.target === ticketPopup && sentContent.style.display === 'none') {
                closeTicketPopup();
            }
            
            // Hall of Fame popup
            const hallOfFamePopup = document.getElementById('hall-of-fame-popup-overlay');
            if (hallOfFamePopup && e.target === hallOfFamePopup) {
                closeHallOfFamePopup();
            }
        });
        
        
        // Theme toggle logic with Firebase saving
        const themeToggle = document.getElementById('theme-toggle');
        let currentUser = null;
        
        // Game time tracking
        let gameStartTime = null;
        let currentGameName = null;
        
        // Game data storage
        let currentGameData = null;
        let gameDataAutoSaveInterval = null;
        
        
        // Function to capture game data from localStorage and cookies
        function captureGameData(gameName) {
            const gameData = {
                localStorage: {},
                sessionStorage: {},
                cookies: document.cookie,
                timestamp: Date.now()
            };
            
            // Capture localStorage data (filter for game-related keys)
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                if (key && (key.toLowerCase().includes(gameName.toLowerCase()) || 
                           key.toLowerCase().includes('game') ||
                           key.toLowerCase().includes('save') ||
                           key.toLowerCase().includes('progress') ||
                           key.toLowerCase().includes('score') ||
                           key.toLowerCase().includes('level') ||
                           key.toLowerCase().includes('player'))) {
                    gameData.localStorage[key] = localStorage.getItem(key);
                }
            }
            
            // Capture sessionStorage data (filter for game-related keys)
            for (let i = 0; i < sessionStorage.length; i++) {
                const key = sessionStorage.key(i);
                if (key && (key.toLowerCase().includes(gameName.toLowerCase()) || 
                           key.toLowerCase().includes('game') ||
                           key.toLowerCase().includes('save') ||
                           key.toLowerCase().includes('progress') ||
                           key.toLowerCase().includes('score') ||
                           key.toLowerCase().includes('level') ||
                           key.toLowerCase().includes('player'))) {
                    gameData.sessionStorage[key] = sessionStorage.getItem(key);
                }
            }
            
            console.log(`Captured game data for ${gameName}:`, gameData);
            return gameData;
        }
        
        // Function to restore game data to localStorage and cookies
        function restoreGameData(gameData) {
            if (!gameData) {
                console.log('No game data to restore');
                return;
            }
            
            try {
                // Restore localStorage data
                if (gameData.localStorage) {
                    Object.entries(gameData.localStorage).forEach(([key, value]) => {
                        localStorage.setItem(key, value);
                    });
                }
                
                // Restore sessionStorage data
                if (gameData.sessionStorage) {
                    Object.entries(gameData.sessionStorage).forEach(([key, value]) => {
                        sessionStorage.setItem(key, value);
                    });
                }
                
                // Restore cookies (note: this has limitations due to browser security)
                if (gameData.cookies) {
                    // Note: Setting cookies from JavaScript is limited by browser security policies
                    // This will only work for cookies that can be set from the current domain
                    console.log('Attempting to restore cookies:', gameData.cookies);
                }
                
                console.log('Game data restored successfully');
            } catch (error) {
                console.error('Failed to restore game data:', error);
            }
        }
        
        async function startGameTimeTracking(gameName) {
            currentGameName = gameName;
            gameStartTime = Date.now();
            console.log('Started tracking time for game:', gameName);
            
            // Start auto-save for game data every 30 seconds
            if (gameDataAutoSaveInterval) {
                clearInterval(gameDataAutoSaveInterval);
            }
            
            gameDataAutoSaveInterval = setInterval(async () => {
                if (currentGame && currentGame.name === gameName) {
                    console.log(`Auto-saving game data for: ${gameName}`);
                    const gameData = captureGameData(gameName);
                    await saveGameData(gameName, gameData);
                }
            }, 30000); // Auto-save every 30 seconds
        }
        
        // Separate function to save game time
        
        
        // Profile dropdown functionality
        
        // Check if current date is during fall season (Sept 20 - Nov 12)
        function isFallSeason() {
            const now = new Date();
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth(); // 0-indexed: 0=Jan, 1=Feb, ..., 8=Sep, 9=Oct, 10=Nov
            const currentDay = now.getDate();
            
            // Check if we're in September (month 8) and day is 20 or later
            const isSeptemberFall = currentMonth === 8 && currentDay >= 20;
            
            // Check if we're in October (month 9)
            const isOctober = currentMonth === 9;
            
            // Check if we're in November (month 10) and day is 12 or earlier
            const isNovemberFall = currentMonth === 10 && currentDay <= 12;
            
            const isInFallSeason = isSeptemberFall || isOctober || isNovemberFall;
            
            // Debug logging
            console.log('Fall Season Check:', {
                currentDate: now.toDateString(),
                currentMonth: currentMonth,
                currentDay: currentDay,
                isSeptemberFall: isSeptemberFall,
                isOctober: isOctober,
                isNovemberFall: isNovemberFall,
                isInFallSeason: isInFallSeason
            });
            
            // Additional debug for September 22nd specifically
            if (currentMonth === 8 && currentDay === 22) {
                console.log('SEPTEMBER 22ND DETECTED - Fall theme should be active!');
            }
            
            return isInFallSeason;
        }
        
        // Check if current date is during winter season (Dec 21 - Mar 20)
        function isWinterSeason() {
            const now = new Date();
            const currentYear = now.getFullYear();
            const currentMonth = now.getMonth(); // 0-indexed: 0=Jan, 1=Feb, ..., 11=Dec
            const currentDay = now.getDate();
            
            // Check if we're in December (month 11) and day is 21 or later
            const isDecemberWinter = currentMonth === 11 && currentDay >= 21;
            
            // Check if we're in January (month 0) or February (month 1)
            const isJanuaryFebruary = currentMonth === 0 || currentMonth === 1;
            
            // Check if we're in March (month 2) and day is 20 or earlier
            const isMarchWinter = currentMonth === 2 && currentDay <= 20;
            
            const isInWinterSeason = isDecemberWinter || isJanuaryFebruary || isMarchWinter;
            
            // Debug logging
            console.log('Winter Season Check:', {
                currentDate: now.toDateString(),
                currentMonth: currentMonth,
                currentDay: currentDay,
                isDecemberWinter: isDecemberWinter,
                isJanuaryFebruary: isJanuaryFebruary,
                isMarchWinter: isMarchWinter,
                isInWinterSeason: isInWinterSeason
            });
            
            return isInWinterSeason;
        }
        
        function setTheme(theme) {
            // During fall season, always use light fall theme
            if (isFallSeason()) {
                theme = 'fall';
            }
            // During winter season, map light/dark to winter themes
            else if (isWinterSeason()) {
                if (theme === 'light') {
                    theme = 'winter';
                } else if (theme === 'dark') {
                    theme = 'winter-dark';
                }
            }
            
            document.body.setAttribute('data-theme', theme);
            
            // Store the base light/dark preference, not the seasonal theme
            let baseTheme = theme;
            if (theme === 'fall') {
                // During fall season, we always use light fall, but don't change the stored preference
                // The stored preference will be used when fall season ends
                return; // Don't update localStorage during fall season
            } else if (theme === 'winter' || theme === 'winter-dark') {
                baseTheme = theme === 'winter' ? 'light' : 'dark';
            } else if (theme === 'spring-dark') {
                baseTheme = 'dark';
            }
            localStorage.setItem('hubble-theme', baseTheme);
            
            // Update theme toggle button icon
            const themeIcons = {
                'light': '🌙',
                'dark': '☀️',
                'fall': '🌙',
                'fall-dark': '☀️',
                'winter': '🌙',
                'winter-dark': '☀️',
                'spring-dark': '☀️'
            };
            themeToggle.textContent = themeIcons[theme] || '🌙';
            
            // Handle falling leaves animation for fall season (regardless of light/dark)
            const isFall = isFallSeason();
            console.log('Fall season check:', isFall);
            if (isFall) {
                createFallingLeaves();
            } else {
                stopFallingLeaves();
            }
            
            // Handle snowflakes animation for winter season (regardless of light/dark)
            const snowflakes = document.getElementById('snowflakes');
            if (isWinterSeason()) {
                createSnowflakes();
            } else {
                if (snowflakes) {
                    snowflakes.innerHTML = '';
                }
            }
        }
        
        
        let leafInterval = null;
        
        // Function to check if it's fall season
        function isFallSeason() {
            const now = new Date();
            const month = now.getMonth() + 1; // 1-12
            const day = now.getDate();
            
            // Fall season: September 1st to November 30th
            if (month === 9) return true; // September
            if (month === 10) return true; // October  
            if (month === 11) return true; // November
            
            return false;
        }
        
        
        // Create falling leaves animation
        function createFallingLeaves() {
            const fallingLeaves = document.getElementById('falling-leaves');
            if (!fallingLeaves) {
                console.warn('Falling leaves container not found');
                return;
            }
            
            console.log('Creating new falling leaves animation');
            fallingLeaves.innerHTML = '';
            
            // Clear any existing interval
            if (leafInterval) {
                clearInterval(leafInterval);
            }
            
            // Create initial batch of leaves
            createLeafBatch();
            
            // Create new leaves every 2 seconds
            leafInterval = setInterval(createLeafBatch, 2000);
            
            console.log('Started continuous falling leaves animation');
        }
        
        function createLeafBatch() {
            const fallingLeaves = document.getElementById('falling-leaves');
            if (!fallingLeaves) return;
            
            // Create 3-5 leaves per batch
            const leafCount = 3 + Math.floor(Math.random() * 3);
            
            for (let i = 0; i < leafCount; i++) {
                const leaf = document.createElement('div');
                leaf.className = 'falling-leaf';
                
                // Random horizontal position
                const leftPosition = Math.random() * 100;
                leaf.style.left = leftPosition + '%';
                
                // Random animation duration
                const duration = 3 + Math.random() * 2; // 3-5 seconds
                leaf.style.animationDuration = duration + 's';
                
                fallingLeaves.appendChild(leaf);
                
                // Remove leaf after animation completes
                setTimeout(() => {
                    if (leaf.parentNode) {
                        leaf.parentNode.removeChild(leaf);
                    }
                }, duration * 1000);
            }
        }
        
        function stopFallingLeaves() {
            if (leafInterval) {
                clearInterval(leafInterval);
                leafInterval = null;
            }
            const fallingLeaves = document.getElementById('falling-leaves');
            if (fallingLeaves) {
                fallingLeaves.innerHTML = '';
            }
        }
        
        // Create snowflakes animation
        function createSnowflakes() {
            const snowflakes = document.getElementById('snowflakes');
            if (!snowflakes) return;
            
            snowflakes.innerHTML = '';
            
            // Snowflake symbols
            const snowflakeSymbols = ['❄', '❅', '❆'];
            
            // Create multiple snowflakes with different animations
            for (let i = 0; i < 20; i++) {
                const snowflake = document.createElement('div');
                snowflake.className = 'snowflake';
                
                // Random snowflake symbol
                snowflake.textContent = snowflakeSymbols[Math.floor(Math.random() * snowflakeSymbols.length)];
                
                // Random positioning and animation duration
                const leftPosition = Math.random() * 100;
                const animationDuration = 4 + Math.random() * 6; // 4-10 seconds
                const animationDelay = Math.random() * 3; // 0-3 seconds delay
                const fontSize = 0.8 + Math.random() * 1.2; // 0.8-2.0em
                
                snowflake.style.left = leftPosition + '%';
                snowflake.style.animationDuration = animationDuration + 's';
                snowflake.style.animationDelay = animationDelay + 's';
                snowflake.style.fontSize = fontSize + 'em';
                
                snowflakes.appendChild(snowflake);
            }
        }
        
        themeToggle.onclick = () => {
            const current = document.body.getAttribute('data-theme');
            
            // During fall season, theme toggle is hidden, so this shouldn't be called
            // But if it is, just return without doing anything
            if (isFallSeason()) {
                return;
            }
            
            // Always toggle between light and dark, regardless of season
            // The setTheme function will map these to the appropriate seasonal themes
            if (current === 'light' || current === 'winter' || current === 'spring-dark') {
                setTheme('dark');
            } else {
                setTheme('light');
            }
        };

        // Games System
        // Note: The favorites system is purely for display organization and does not affect game saves, localStorage, or cookies
        const gamesList = [
            { name: "Doodle Jump", image: "images/Doodle-Jump.png", url: "./games/Doodle_jump.html"    },
            { name: "Getting Over It", image: "images/Getting-Over-It.png", url: "./games/gettingoverit.html", favorite: true },
            { name: "Retro Bowl", image: "images/Retro-Bowl.png", url: "./games/retro-bowl/", favorite: true },
            { name: "Slope", image: "images/Slope.png", url: "./games/slope.html", favorite: true },
            { name: "Snow Rider 3D", image: "images/Snow-Rider-3d.png", url: "./games/Snow Rider 3D.html" },
            { name: "Tetris", image: "images/Tetris.png", url: "./games/Tetris.html" },
            { name: "Appel",image: "images/Appel.png", url: "./games/Appel.html"},
            { name: "Arena", image: "images/Arena.png", url: "./games/Arena.html", favorite: true },
            { name: "Space Huggers", image: "images/Space-Huggers.png", url: "./games/spacehuggers.html" },
            { name: "Stack", image: "images/Stack.png", url: "./games/stack.html" },
            { name: "Suika Watermelon", image: "images/Suika-Watermelon.png", url: "./games/Suika-watermelon.html"    },
            { name: "60 Seconds Burger Run", image: "images/60-Seconds-Burger-Run.png", url: "./games/60second_burger_run.html", favorite: true  },
            { name: "Eaglercraft", image: "images/Eaglercraft.png", url: "./games/EaglercraftX_1.8_u45_Offline_Signed (1).html", favorite: true },
            { name: "1v1.LOL", image: "images/1v1-lol.png", url: "./games/1v1.lol/index.html" },
            { name: "Ball Blast", image: "images/Ball-Blast.png", url: "./games/ball-blast.html" },
            { name: "Multiplayer Appel", image: "images/Appel-Multiplayer.png", comingSoon: true },
            { name: "2048", image: "images/2048.png", url: "./games/2048.html" },
            { name: "Volcanic Appel", image: "images/Volcanic-Appel.png", url: "./games/Volcanic-Appel.html" },
            { name: "Agar.io", image: "images/agario.png", url: "./games/agario.html" },
            { name: "Basketball Stars", image: "images/Basketball-Stars.png", url: "./games/basketball-stars/" },
            { name: "1", image: "images/1.png", url: "./games/1/" },
            { name: "2048 Multitask", image: "images/2048-Multitask.png", comingSoon: true },
            { name: "Angry Birds", image: "images/Angry-Birds.png", url: "./games/angry-birds/" },
            { name: "Among Us", image: "images/Among-Us.png", url: "./games/among-us/" },
            { name: "The Binding Of Issac", image: "images/The-Binding-Of-Isaac.png", url: "./games/binding-of-isaac/" },
            { name: "Cookie Clicker", image: "images/Cookie-Clicker.png", url: "./games/cookieclicker/" },
            { name: "Chrome Dino", image: "images/Chrome-Dino.png", url: "./games/chrome-dino/" },
            { name: "Duck Life", image: "images/Duck-Life.png", url: "./games/ducklife/" },
            { name: "Duck Life 2", image: "images/Duck-Life-2.png", url: "./games/ducklife2/" },
            { name: "Duck Life 3", image: "images/Duck-Life-3.png", url: "./games/ducklife3/" },
            { name: "Duck Life 4", image: "images/Duck-Life-4.png", url: "./games/ducklife4/" },
            { name: "Duck Life Treasure Hunt", image: "images/Duck-Life-Treasure-Hunt.png", url: "./games/duck-life-treasurehunt/" },
            { name: "Bitlife", image: "images/Bitlife.png", url: "./games/bitlife/" },
            { name: "Geometry Dash", image: "images/Geometry-Dash.png", url: "./games/geometrydash/" },
            { name: "Core Ball", image: "images/coreball.png", url: "./games/core-ball/" },
            { name: "Bloons TD", image: "images/Bloonstd.png", url: "./games/bloonstd/" },
            { name: "Bloons TD 2", image: "images/Bloonstd2.png", url: "./games/bloonstd2/" },
            { name: "Friday Night Funkin", image: "images/Friday-Night-Funkin.png", url: "./games/friday-night-funkin/" },
            { name: "Getaway Shootout", image: "images/Getaway-Shootout.png", url: "./games/getaway-shootout/" },
            { name: "Subway Surfers", image: "images/Subway-Surfers.png", url: "./games/subway-surfers/" },
            { name: "Tiny Fishing", image: "images/Tiny-Fishing.png", url: "./games/tiny-fishing/" },
            { name: "Stickman Hook", image: "images/Stickman-Hook.png", url: "./games/stickman-hook/" },
            { name: "Idle Breakout", image: "images/Idle-Breakout.png", url: "./games/idle-breakout/" },
            { name: "Learn To Fly", image: "images/Learn-To-Fly.png", url: "./games/flash/?game=learn-to-fly" },
            { name: "Learn To Fly 2", image: "images/Learn-To-Fly-2.png", url: "./games/flash/?game=learn-to-fly-2" },
            { name: "Learn To Fly 3", image: "images/Learn-To-Fly-3.png", url: "./games/flash/?game=learn-to-fly-3" },
            { name: "Learn To Fly Idle", image: "images/Learn-To-Fly-Idle.png", url: "./games/flash/?game=learn-to-fly-idle" },
            { name: "Gun Mayhem", image: "images/Gun-Mayhem.png", url: "./games/flash/?game=gun-mayhem" },
            { name: "Gun Mayhem 2", image: "images/Gun-Mayhem-2.png", url: "./games/flash/?game=gun-mayhem-2" },
            { name: "Gun Spin", image: "images/Gunspin.png", url: "./games/gunspin/" },
            { name: "Google Snake", image: "images/Google-Snake.png", url: "./games/google-snake/" },
            { name: "Doge Miner", image: "images/Doge-miner.png", url: "./games/DogeMiner/" },
            { name: "Doge Miner 2", image: "images/Doge-Miner-2.png", url: "./games/doge-miner-2/" },
            { name: "Crossy Road", image: "images/Crossy-Road.png", url: "./games/crossyroad/" },
            { name: "Cluster Rush", image: "images/Cluster-Rush.png", url: "./games/cluster-rush/" },
            { name: "Craftmine", image: "images/Craftmine.png", url: "./games/craftmine/" },
            { name: "Volley Random", image: "images/Volley-Random.png", url: "./games/volley-random/" },
            { name: "Basket Random", image: "images/Basket-Random.png", url: "./games/basket-random/" },
            { name: "Soccer Random", image: "images/Soccer-Random.png", url: "./games/soccer-random/" },
            { name: "Drift Boss", image: "images/Drift-Boss.png", url: "./games/drift-boss/" },
            { name: "Drive Mad", image: "images/Drive-Mad.png", url: "./games/drive-mad/" },
            { name: "Monkey Mart", image: "images/Monkey-Mart.png", url: "./games/monkey-mart/" },
            { name: "Gons.io", image: "images/Gons-io.png", url: "./games/gons-io/" },
            { name: "Rooftop Snipers", image: "images/Rooftop-Snipers.png", url: "./games/rooftop-snipers/" },
            { name: "A Game Inside", image: "images/A-Game-Inside.png", url: "./games/game-inside/" },
            { name: "Tanuki Sunset", image: "images/Tanuki-Sunset.png", url: "./games/tanuki-sunset/" },
            { name: "Blumgi Ball", image: "images/Blumgi-Ball.png", url: "./games/blumgi-ball/" },
            { name: "PolyTrack", image: "images/Polytrack.png", url: "./games/polytrack/" },
            { name: "Iron Snout", image: "images/iron-snout.png", url: "https://betterbull.com/uploads/5/5/6/7/5567194/custom_themes/811766381464516446/files/index.html" },
            { name: "Bacon May Die", image: "images/Bacon-May-Die.png", url: "https://betterbull.com/uploads/5/5/6/7/5567194/custom_themes/320690105873469650/files/index.html" },
            { name: "N-gon", image: "images/n-gon.png", url: "./games/n-gon/" },
            { name: "Vex 3", image: "images/vex-3.png", url: "./games/vex-3/" },
            { name: "Vex 4", image: "images/Vex-4.png", url: "./games/vex-4/" },
            { name: "Vex 5", image: "images/vex-5.png", url: "./games/vex-5/" },
            { name: "Vex 6", image: "images/Vex-6.png", url: "./games/vex-6/" },
            { name: "Vex 7", image: "images/vex-7.png", url: "./games/vex-7/" },
            { name: "Motox3m", image: "images/Motox3m.png", url: "./games/motox3m/" },        
            { name: "Flappy Bird", image: "images/flappy-Bird.png", url: "./games/flappy-bird/" },
            { name: "Backrooms", image: "images/Backrooms.png", url: "./games/backrooms/" },
            { name: "Geometry Dash Remastered", image: "images/geometry-Dash-Remastered.png", url: "./games/geometry-dash-remastered/", comingSoon: true },
            { name: "Burrito Bison", image: "images/burrito-Bison.png", url: "./games/burrito-bison/", favorite: true },
            { name: "Cut The Rope ", image: "images/Cut-The-Rope.png", url: "./games/cut-the-rope/" },
            { name: "Cannon Basketball 4", image: "images/Cannon-Basketball.png", url: "./games/cannon-basketball-4/" },
            { name: "Doge Mining Simulator", image: "images/Doge-Mining-Simulator.png", url: "./games/doge-mining-simulator/" },
            { name: "Basket.io", image: "images/Basketball-io.png", url: "./games/basketball-io/" },
            { name: "Baldis Basics", image: "images/Baldis-Basics.png", url: "./games/baldis-basics/"  },
            { name: "Car Simulator", image: "images/Cars-Simulator.png", url: "./games/cars-simulator/"  },
            { name: "Racer", image: "images/racer.png", url: "./games/racer/"  },
            { name: "Bloxorz", image: "images/Bloxorz.png", url: "./games/bloxors/"  },
            { name: "Boxel Rebound", image: "images/Boxel-Rebound.png", url: "./games/boxel-rebound/"  },
            { name: "Gravity Soccer", image: "images/gravity-soccer.png", url: "./games/gravity-soccer/"  },
            { name: "Justfall", image: "images/Justfall.png", url: "./games/justfall/"  },
            { name: "Eggy Car", image: "images/Eggy-Car.png", url: "./games/eggy-car/"  },
            { name: "Particle Clicker", image: "images/Particle-Clicker.png", url: "./games/particleclicker/"  },
            { name: "Escape Road", image: "images/Escape-Road.png", url: "./games/escape-road/", favorite: true  },
            { name: "Escape Road 2", image: "images/Escape-Road-2.png", url: "./games/escape-road-2/"  },
            { name: "Escape Road City", image: "images/Escape-Road-City.png", url: "./games/escape-road-city/" },
            { name: "Escape Road City 2",  image: "images/Escape-Road-City-2.png", url: "./games/escape-road-city-2/" },
            { name: "Wordle", image: "images/Wordle.png", url: "./games/wordle/"  },
            { name: "Yohoho", image: "images/Yohoho.png", url: "./games/yohoho/"  },
            { name: "Gladihoppers", image: "images/Gladihoppers.png", url: "./games/gladihoppers/" },
            { name: "Quiz 60", image: "images/Quiz-60.png", url: "https://quiz-60.github.io/" },
            { name: "Quiz 70", image: "images/Quiz-70.png", url: "https://quiz-70.github.io/" },
            { name: "Slow Roads", image: "images/Slow-Roads.png", url: "./games/slow-roads/" },
            { name: "Astrotype", image: "images/Astrotype.png", url: "./games/astrotype.html" },
            { name: "Planet clicker", image: "images/Planet-Clicker.png", url: "./games/planet-clicker.html" },
            { name: "Slope 2", image: "images/Slope-2.png", url: "./games/slope-2/" },
            { name: "Slope 3", image: "images/Slope-3.png", url: "./games/slope-3/" },
            { name: "Blumgi Rocket", image: "images/Blumgi-Rocket.png", url: "./games/blumgi-rocket/index.html" },
            { name: "1 On 1 Soccer", image: "images/1-On-1-Soccer.png", url: "./games/1on1soccer/game.html" },
            { name: "Blumgi Slime", image: "images/Blumgi-Slime.png", url: "./games/blumgi-slime/index.html" },
            { name: "Iron Snout 2", image: "images/Iron-Snout-2.png", url: "./games/iron-snout/" },
            { name: "Bacon May Die 2", image: "images/Bacon-May-Die-2.png", url: "./games/bacon-may-die/" },
            { name: "Dino Merge Masters", image: "images/Dino-Merge.png", url: "./games/dino-merge/" },
            { name: "Elastic Man", image: "images/Elastic-Man.png", url: "./games/elastic-face/index.html" },
            { name: "Motox3m Spooky", image: "images/Motox3m-Spooky.png", url: "./games/motox3m-spooky/game.html" },
            { name: "Motox3m Winter", image: "images/Motox3m-Winter.png", url: "./games/motox3m-winter/" },
            { name: "Vex 8", image: "images/Vex-8.png", url: "./games/vex8/" },
            { name: "Solitaire", image: "images/Solitaire.png", url: "./games/solitaire/index.html" },
            { name: "Fruit Ninja", image: "images/Fruit-Ninja.png", url: "./games/fruit-ninja/" },
            { name: "Pixel Smash Duels", image: "images/Pixel-Smash-Duels.png", url: "./games/pixel-smash-duels", comingSoon: true  },
            { name: "Slope 3d", image: "images/Slope3d.png", url: "./games/slope3d/", },
            { name: "Create A Path", image: "images/Create-A-Path.png", url: "./games/create-a-path.html" },
            { name: "A Chefs Chaos", image: "images/Chefs-Chaos.png", url: "./games/chefs-chaos.html" },
            { name: "New Game Coming Soon", image: "images/placeholder.png", comingSoon: true },
            { name: "Tag", image: "images/Tag.png", url: "./games/tag/index.html" },
            { name: "Sai Clicker", image: "images/Sai-Clicker.png", url: "./games/sai-clicker.html" },
            { name: "Trick Or Treat", image: "images/Trick-Or-Treat.png.png", url: "./games/Trick-Or-Treat.html", releaseDate: "10/01/2025" },
            { name: "Candy Clicker", image: "images/Candy-Clicker.png.png", url: "./games/Candy-Clicker.html", releaseDate: "10/01/2025" },
            
        ];

        
        let allGames = [];
        let currentGame = null;
        
        // Function to check if a game should be shown based on release date
        function isGameReleased(game) {
            // If game has comingSoon: true, it should be shown but marked as coming soon
            if (game.comingSoon) {
                return true;
            }
            
            if (!game.releaseDate) {
                return true; // No release date means it's always available
            }
            
            // Parse release date (format: MM/DD/YYYY)
            const releaseDateStr = game.releaseDate.toString();
            const dateParts = releaseDateStr.split('/');
            
            if (dateParts.length !== 3) {
                console.warn('Invalid release date format for', game.name, ':', game.releaseDate);
                return true; // Show if invalid format
            }
            
            const month = parseInt(dateParts[0]);
            const day = parseInt(dateParts[1]);
            const year = parseInt(dateParts[2]);
            
            const releaseDate = new Date(year, month - 1, day); // month is 0-indexed
            const currentDate = new Date();
            
            return currentDate >= releaseDate;
        }

        function initGamesSection() {
            // Initialize allGames and filter by release date
            allGames = gamesList.filter(game => isGameReleased(game));
            console.log('Initializing games section with', allGames.length, 'games (filtered from', gamesList.length, 'total)');
            
            // Update search placeholder with game count
            const searchInput = document.getElementById('games-search');
            if (searchInput) {
                searchInput.placeholder = `Search through our ${allGames.length} games...`;
            }
            
            // Add a delay to ensure DOM is ready
            setTimeout(() => {
                console.log('Populating games grid...');
                populateFavoritesGrid();
                populateGamesGrid();
                setupGamesSearch();
            }, 200);
        }
        
        // Function to generate game name abbreviation
        function generateGameAbbreviation(gameName) {
            const words = gameName.split(' ').filter(word => word.length > 0);
            
            // Take first character of each word, limit to 4 characters max
            const abbreviation = words
                .slice(0, 4) // Limit to first 4 words
                .map(word => word[0]) // Get first character of each word
                .join('')
                .toUpperCase();
            
            return abbreviation;
        }
        
        // Function to get random color for placeholder
        function getRandomPlaceholderColor() {
            const colors = [
                { primary: '#FF6384', secondary: '#FF8FA3' }, // Pink
                { primary: '#36A2EB', secondary: '#5BB3F0' }, // Blue
                { primary: '#FFCE56', secondary: '#FFD675' }, // Yellow
                { primary: '#4BC0C0', secondary: '#6BCACA' }, // Teal
                { primary: '#9966FF', secondary: '#AD7AFF' }, // Purple
                { primary: '#FF9F40', secondary: '#FFB366' }, // Orange
                { primary: '#C7C7C7', secondary: '#D4D4D4' }, // Gray
                { primary: '#5366FF', secondary: '#6B7AFF' }, // Indigo
                { primary: '#FF6B6B', secondary: '#FF8A8A' }, // Red
                { primary: '#4ECDC4', secondary: '#6DD5CE' }, // Mint
                { primary: '#45B7D1', secondary: '#6BC5D8' }, // Sky Blue
                { primary: '#96CEB4', secondary: '#A8D5C1' }, // Green
                { primary: '#FFEAA7', secondary: '#FFEDB8' }, // Light Yellow
                { primary: '#DDA0DD', secondary: '#E4B3E4' }, // Plum
                { primary: '#98D8C8', secondary: '#A8DFD1' }  // Aqua
            ];
            
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function populateFavoritesGrid() {
            const favoritesGrid = document.getElementById('favorites-grid');
            
            if (!favoritesGrid) {
                console.error('Favorites grid element not found');
                return;
            }
            
            // Get only favorite games (ensure we don't modify the original game objects)
            const favoriteGames = allGames.filter(game => game.favorite === true);
            
            if (favoriteGames.length === 0) {
                console.log('No favorite games to display');
                favoritesGrid.innerHTML = '<div class="games-loading">No favorites found</div>';
                return;
            }
            
            console.log('Populating favorites grid with', favoriteGames.length, 'games');
            
            // Sort favorites alphabetically
            const sortedFavorites = [...favoriteGames].sort((a, b) => a.name.localeCompare(b.name));
            
            const favoritesHTML = sortedFavorites.map((game, index) => {
                const abbreviation = generateGameAbbreviation(game.name);
                const colorScheme = getRandomPlaceholderColor();
                
                // Determine CSS classes and click behavior
                let cssClasses = 'game-card';
                let clickHandler = `onclick="openGame('${game.name}', '${game.url}')"`;
                
                // Check if game should be marked as coming soon
                const isComingSoon = game.comingSoon || (game.releaseDate && !isGameReleased(game));
                
                if (isComingSoon) {
                    cssClasses += ' coming-soon';
                    clickHandler = ''; // No click handler for coming soon games
                }
                
                return `
                <div class="${cssClasses}" ${clickHandler}>
                    <img src="${game.image}" alt="${game.name}" class="game-image" loading="lazy" 
                         onerror="showGamePlaceholder(this, '${abbreviation}', '${colorScheme.primary}', '${colorScheme.secondary}')">
                    <h3 class="game-name">${game.name}</h3>
                </div>
                `;
            }).join('');
            
            favoritesGrid.innerHTML = favoritesHTML;
        }

        function populateGamesGrid() {
            const gamesGrid = document.getElementById('games-grid');
            
            if (!gamesGrid) {
                console.error('Games grid element not found');
                return;
            }
            
            // Check if we're in search mode (games have scores) or normal mode
            const isSearchMode = allGames[0] && allGames[0].hasOwnProperty('score');
            
            let gamesToShow;
            if (isSearchMode) {
                // In search mode, show ALL games (including favorites)
                gamesToShow = allGames;
                console.log('Populating grid with', gamesToShow.length, 'games (search mode - including favorites)');
            } else {
                // In normal mode, exclude favorites from main collection
                gamesToShow = allGames.filter(game => game.favorite !== true);
                console.log('Populating grid with', gamesToShow.length, 'games (normal mode - excluding favorites)');
            }
            
            if (gamesToShow.length === 0) {
                console.log('No games to display');
                gamesGrid.innerHTML = '<div class="games-loading">No games found</div>';
                return;
            }
            
            // Check if games have scores (from search) or sort alphabetically
            let sortedGames;
            if (isSearchMode) {
                // Games are already sorted by score from search
                sortedGames = gamesToShow;
            } else {
                // Sort games alphabetically for default view
                sortedGames = [...gamesToShow].sort((a, b) => a.name.localeCompare(b.name));
            }
            
            const gamesHTML = sortedGames.map((game, index) => {
                const abbreviation = generateGameAbbreviation(game.name);
                const colorScheme = getRandomPlaceholderColor();
                
                // Determine CSS classes and click behavior
                let cssClasses = 'game-card';
                let clickHandler = `onclick="openGame('${game.name}', '${game.url}')"`;
                
                // Check if game should be marked as coming soon
                const isComingSoon = game.comingSoon || (game.releaseDate && !isGameReleased(game));
                
                if (isComingSoon) {
                    cssClasses += ' coming-soon';
                    clickHandler = ''; // No click handler for coming soon games
                }
                
                return `
                <div class="${cssClasses}" ${clickHandler}>
                    <img src="${game.image}" alt="${game.name}" class="game-image" loading="lazy" 
                         onerror="showGamePlaceholder(this, '${abbreviation}', '${colorScheme.primary}', '${colorScheme.secondary}')">
                    <h3 class="game-name">${game.name}</h3>
                </div>
                `;
            }).join('');
            
            console.log('Generated HTML for first game:', sortedGames[0] ? sortedGames[0].name : 'none');
            console.log('First game image path:', sortedGames[0] ? sortedGames[0].image : 'none');
            
            gamesGrid.innerHTML = gamesHTML;
        }
        
        // Function to show placeholder when image fails to load
        function showGamePlaceholder(imgElement, abbreviation, primaryColor, secondaryColor) {
            console.log('showGamePlaceholder called with:', { abbreviation, primaryColor, secondaryColor });
            
            const gameCard = imgElement.closest('.game-card');
            if (!gameCard) {
                console.error('Could not find game card for image element');
                return;
            }
            
            // Create placeholder element
            const placeholder = document.createElement('div');
            placeholder.className = 'game-image-placeholder';
            placeholder.style.setProperty('--placeholder-bg', primaryColor);
            placeholder.style.setProperty('--placeholder-bg-secondary', secondaryColor);
            
            const textElement = document.createElement('div');
            textElement.className = 'placeholder-text';
            textElement.textContent = abbreviation;
            placeholder.appendChild(textElement);
            
            // Replace the image with placeholder
            imgElement.parentNode.replaceChild(placeholder, imgElement);
            
            console.log(`Successfully showing placeholder for game with abbreviation: ${abbreviation}`);
        }
        
        
        function setupGamesSearch() {
            const searchInput = document.getElementById('games-search');
            if (!searchInput) return;
            
            // Add focus/blur events
            searchInput.addEventListener('focus', function() {
                this.classList.add('paused');
            });
            
            searchInput.addEventListener('blur', function() {
                this.classList.remove('paused');
            });
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                const favoritesSection = document.getElementById('favorites-section');
                const allGamesSection = document.getElementById('all-games-section');
                
                if (!searchTerm) {
                    // Reset to original games list without scores
                    allGames = [...gamesList];
                    // Show favorites section when not searching
                    if (favoritesSection) favoritesSection.style.display = 'block';
                    if (allGamesSection) allGamesSection.style.display = 'block';
                    // Show the "All Games" title when not searching
                    const allGamesTitle = document.querySelector('#all-games-section .section-title');
                    if (allGamesTitle) allGamesTitle.style.display = 'block';
                    // Repopulate favorites grid
                    populateFavoritesGrid();
                } else {
                    // Hide favorites section when searching
                    if (favoritesSection) favoritesSection.style.display = 'none';
                    // Hide the "All Games" title when searching
                    const allGamesTitle = document.querySelector('#all-games-section .section-title');
                    if (allGamesTitle) allGamesTitle.style.display = 'none';
                    if (allGamesSection) allGamesSection.style.display = 'block';
                    
                    // Advanced relevance scoring - include ALL games (including favorites) in search
                    allGames = gamesList.filter(game => 
game.name.toLowerCase().includes(searchTerm)
                    ).map(game => {
                        const gameName = game.name.toLowerCase();
                        let score = 0;
                        
                        // Exact match gets highest score
                        if (gameName === searchTerm) {
                            score = 10000;
                        }
                        // Starts with search term gets very high score
                        else if (gameName.startsWith(searchTerm)) {
                            score = 8000 + (100 - searchTerm.length); // Shorter searches get higher priority
                        }
                        // Word boundary matches (space or dash before the term) get high score
                        else if (gameName.includes(' ' + searchTerm) || gameName.includes('-' + searchTerm)) {
                            score = 6000;
                        }
                        // Word boundary matches (space or dash after the term) get high score
                        else if (gameName.includes(searchTerm + ' ') || gameName.includes(searchTerm + '-')) {
                            score = 5000;
                        }
                        // Contains search term as whole word (surrounded by spaces/dashes/start/end)
                        else if (new RegExp('\\b' + searchTerm + '\\b').test(gameName)) {
                            score = 4000;
                        }
                        // Contains search term gets medium score
                        else if (gameName.includes(searchTerm)) {
                            // Earlier in the name = higher score
                            const position = gameName.indexOf(searchTerm);
                            score = 2000 - position;
                        }
                        
                        // Bonus for shorter names (more specific)
                        score += Math.max(0, 100 - game.name.length);
                        
                        // Additional bonus for games that start with the same letter as search term
                        if (gameName.charAt(0) === searchTerm.charAt(0)) {
                            score += 50;
                        }
                        
                        return { ...game, score };
                    }).sort((a, b) => {
                        // Sort by score first (descending), then alphabetically
                        if (b.score !== a.score) return b.score - a.score;
                        return a.name.localeCompare(b.name);
                    });
                }
                
                populateGamesGrid();
            });
        }
        
        function openGame(gameName, gameUrl) {
            currentGame = { name: gameName, url: gameUrl };
            
            const gameFullscreen = document.getElementById('game-fullscreen');
            const gameContent = document.getElementById('game-content');
            
            if (!gameFullscreen || !gameContent) {
                console.error('Game fullscreen elements not found');
                return;
            }
            
            gameContent.src = gameUrl;
            gameFullscreen.style.display = 'flex';
            
            // Modify header for game mode
            enterGameMode(gameName);
        }
        
        function enterGameMode(gameName) {
            const topbar = document.querySelector('.topbar');
            const hubbleTitle = document.querySelector('.hubble-gradient');
            const alphaBadge = document.getElementById('alpha-badge');
            
            // Add game mode class
            topbar.classList.add('game-mode');
            
            // Store original content
            if (!topbar.dataset.originalTitle) {
                topbar.dataset.originalTitle = hubbleTitle.innerHTML;
            }
            
            // Change title to game name
            hubbleTitle.innerHTML = gameName;
            
            // Create game controls in header
                createGameControlsInHeader();
            
            // Hide alpha badge
            if (alphaBadge) {
                alphaBadge.classList.add('hidden');
            }
        }
        
        function createGameControlsInHeader() {
            // Remove existing controls if any
            removeGameControlsFromHeader();
            
            // Create fullscreen button
            const fullscreenBtn = document.createElement('button');
            fullscreenBtn.id = 'game-fullscreen-btn';
            fullscreenBtn.className = 'game-fullscreen-btn';
            fullscreenBtn.textContent = 'Fullscreen';
            fullscreenBtn.onclick = toggleTabFullscreen;
            
            // Create exit button  
            const exitBtn = document.createElement('button');
            exitBtn.id = 'game-exit-btn-new';
            exitBtn.className = 'game-exit-btn';
            exitBtn.textContent = 'Exit Game';
            exitBtn.onclick = exitGame;
            
            // Create container
            const gameControls = document.createElement('div');
            gameControls.id = 'game-controls';
            gameControls.className = 'game-controls';
            gameControls.style.display = 'flex';
            gameControls.appendChild(fullscreenBtn);
            gameControls.appendChild(exitBtn);
            
            // Insert into topbar
            const topbar = document.querySelector('.topbar');
            topbar.appendChild(gameControls);
        }
        
        function removeGameControlsFromHeader() {
            const existingControls = document.getElementById('game-controls');
            if (existingControls) {
                existingControls.remove();
            }
        }
        
        let isTabFullscreen = false;
        let isTrueFullscreen = false;
        
        function toggleTrueFullscreen() {
            if (!document.fullscreenElement) {
                // Enter true fullscreen
                document.documentElement.requestFullscreen().then(() => {
                    isTrueFullscreen = true;
                    const trueFullscreenBtn = document.getElementById('game-true-fullscreen-btn');
                    if (trueFullscreenBtn) {
                        trueFullscreenBtn.textContent = 'Exit True Fullscreen';
                    }
                }).catch(err => {
                    console.error('Error entering fullscreen:', err);
                });
            } else {
                // Exit true fullscreen
                document.exitFullscreen().then(() => {
                    isTrueFullscreen = false;
                    const trueFullscreenBtn = document.getElementById('game-true-fullscreen-btn');
                    if (trueFullscreenBtn) {
                        trueFullscreenBtn.textContent = 'True Fullscreen';
                    }
                }).catch(err => {
                    console.error('Error exiting fullscreen:', err);
                });
            }
        }
        
        function toggleTabFullscreen() {
            const gameFullscreen = document.getElementById('game-fullscreen');
            const topbar = document.querySelector('.topbar');
            const fullscreenBtn = document.getElementById('game-fullscreen-btn');
            
            if (!isTabFullscreen) {
                // Enter tab fullscreen mode
                gameFullscreen.classList.add('tab-fullscreen');
                topbar.style.display = 'none';
                
                // Move back button to be positioned above the game
                fullscreenBtn.classList.add('minimized');
                fullscreenBtn.textContent = '← Back';
                
                // Create true fullscreen button and position it next to back button
                const trueFullscreenBtn = document.createElement('button');
                trueFullscreenBtn.id = 'game-true-fullscreen-btn';
                trueFullscreenBtn.className = 'game-fullscreen-btn minimized true-fullscreen';
                trueFullscreenBtn.textContent = 'True Fullscreen';
                trueFullscreenBtn.onclick = toggleTrueFullscreen;
                
                // Remove back button from header and add both buttons to game container
                fullscreenBtn.remove();
                gameFullscreen.appendChild(fullscreenBtn);
                gameFullscreen.appendChild(trueFullscreenBtn);
                
                isTabFullscreen = true;
            } else {
                // Exit true fullscreen if active
                if (isTrueFullscreen && document.fullscreenElement) {
                    document.exitFullscreen().then(() => {
                        isTrueFullscreen = false;
                    }).catch(err => {
                        console.error('Error exiting fullscreen:', err);
                    });
                }
                
                // Exit tab fullscreen mode
                gameFullscreen.classList.remove('tab-fullscreen');
                topbar.style.display = 'flex';
                fullscreenBtn.classList.remove('minimized');
                fullscreenBtn.textContent = 'Fullscreen';
                
                // Remove true fullscreen button
                const trueFullscreenBtn = document.getElementById('game-true-fullscreen-btn');
                if (trueFullscreenBtn) {
                    trueFullscreenBtn.remove();
                }
                
                // Move back button back to header
                fullscreenBtn.remove();
                const gameControls = document.getElementById('game-controls');
                if (gameControls) {
                    gameControls.insertBefore(fullscreenBtn, gameControls.firstChild);
                }
                
                isTabFullscreen = false;
            }
        }
        
        function exitGame() {
            const gameFullscreen = document.getElementById('game-fullscreen');
            const gameContent = document.getElementById('game-content');
            const topbar = document.querySelector('.topbar');
            const hubbleTitle = document.querySelector('.hubble-gradient');
            
            // Exit true fullscreen if active
            if (isTrueFullscreen && document.fullscreenElement) {
                document.exitFullscreen().then(() => {
                    isTrueFullscreen = false;
                }).catch(err => {
                    console.error('Error exiting fullscreen:', err);
                });
            }
            
            // Exit tab fullscreen if active
            if (isTabFullscreen) {
                gameFullscreen.classList.remove('tab-fullscreen');
                topbar.style.display = 'flex';
                isTabFullscreen = false;
            }
            
            // Hide game fullscreen
            gameFullscreen.style.display = 'none';
            gameContent.src = '';
            
            // Remove game controls from header
            removeGameControlsFromHeader();
            
            // Remove true fullscreen button if it exists
            const trueFullscreenBtn = document.getElementById('game-true-fullscreen-btn');
            if (trueFullscreenBtn) {
                trueFullscreenBtn.remove();
            }
            
            // Restore header
            topbar.classList.remove('game-mode');
            hubbleTitle.innerHTML = topbar.dataset.originalTitle || 'Hubble<span class="alpha-badge" id="alpha-badge">Beta</span>';
            
            // Restore alpha badge
            const alphaBadge = document.getElementById('alpha-badge');
            if (alphaBadge) {
                alphaBadge.classList.remove('hidden');
            }
            
            // Show post button again
            const postButton = document.getElementById('post-expand-toggle');
            if (postButton) {
                postButton.style.display = 'block';
            }
            
            currentGame = null;
        }
        
        function openRandomGame() {
            if (gamesList.length > 0) {
                const randomGame = gamesList[Math.floor(Math.random() * gamesList.length)];
                openGame(randomGame.name, randomGame.url);
            }
        }
        
        // Add global escape key handler for games
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && currentGame) {
                if (isTrueFullscreen && document.fullscreenElement) {
                    // Exit true fullscreen first
                    toggleTrueFullscreen();
                } else if (isTabFullscreen) {
                    // Exit tab fullscreen first
                    toggleTabFullscreen();
                } else {
                    // Exit game completely
                    exitGame();
                }
            }
        });
        
        // Listen for fullscreen changes to update button state
        document.addEventListener('fullscreenchange', function() {
            if (!document.fullscreenElement && isTrueFullscreen) {
                // User exited fullscreen via browser controls
                isTrueFullscreen = false;
                const trueFullscreenBtn = document.getElementById('game-true-fullscreen-btn');
                if (trueFullscreenBtn) {
                    trueFullscreenBtn.textContent = 'True Fullscreen';
                }
            }
        });
        
        
        
        function createConfetti() {
            const confettiContainer = document.getElementById('confetti-container');
            const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3', '#54a0ff'];
            
            const confetti = document.createElement('div');
            confetti.className = 'confetti-piece';
            confetti.style.left = Math.random() * 100 + '%';
            confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
            confetti.style.animationDelay = Math.random() * 2 + 's';
            confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
            
            confettiContainer.appendChild(confetti);
            
            // Remove confetti after animation completes
            setTimeout(() => {
                if (confetti.parentNode) {
                    confetti.parentNode.removeChild(confetti);
                }
            }, 5000);
        }
        
        function startConfetti() {
            // Create confetti every 30ms for much more confetti
            const confettiInterval = setInterval(createConfetti, 30);
            
            // Store interval ID for cleanup
            window.confettiInterval = confettiInterval;
        }
        
        function stopConfetti() {
            if (window.confettiInterval) {
                clearInterval(window.confettiInterval);
                window.confettiInterval = null;
            }
        }
        
        
        // Initialize games section on load
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize theme based on saved preference
            const savedTheme = localStorage.getItem('hubble-theme');
            let initialTheme = savedTheme || 'light';
            
            // If saved theme is a seasonal theme, convert it back to light/dark
            if (savedTheme === 'fall' || savedTheme === 'fall-dark') {
                initialTheme = savedTheme === 'fall' ? 'light' : 'dark';
            } else if (savedTheme === 'winter' || savedTheme === 'winter-dark') {
                initialTheme = savedTheme === 'winter' ? 'light' : 'dark';
            } else if (savedTheme === 'spring-dark') {
                initialTheme = 'dark';
            }
            
            // During fall season, always use light fall theme regardless of preference
            if (isFallSeason()) {
                initialTheme = 'light'; // This will be mapped to 'fall' in setTheme
            }
            
            setTheme(initialTheme);
            
            initGamesSection();
            
            // Setup bug button
            const bugButton = document.getElementById('bug-button');
            if (bugButton) {
                bugButton.addEventListener('click', showBugPopup);
            }
            
            // Setup game suggestion button
            const gameSuggestionBtn = document.getElementById('game-suggestion-btn');
            if (gameSuggestionBtn) {
                gameSuggestionBtn.addEventListener('click', showGameSuggestionPopup);
            }
            
            // Setup Hall of Fame button
            const hallOfFameBtn = document.getElementById('hall-of-fame-btn');
            if (hallOfFameBtn) {
                hallOfFameBtn.addEventListener('click', showHallOfFamePopup);
            }
            
            
            
            // Setup Hall of Fame category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.target.getAttribute('data-category');
                    switchHallOfFameCategory(category);
                });
            });
        });
        
        
        // Save pending data to localStorage for recovery
        function savePendingData() {
            if (currentGame && currentGame.name && currentUser) {
                const gameData = captureGameData(currentGame.name);
                const pendingData = {
                    gameName: currentGame.name,
                    gameData: gameData,
                    userId: currentUser.uid,
                    timestamp: Date.now()
                };
                localStorage.setItem('pendingGameData', JSON.stringify(pendingData));
            }
            
            if (gameStartTime && currentGameName && currentUser) {
                const timeSpent = Date.now() - gameStartTime;
                const timeSpentSeconds = Math.round(timeSpent / 1000);
                if (timeSpentSeconds > 0) {
                    const pendingTime = {
                        gameName: currentGameName,
                        timeSpent: timeSpentSeconds,
                        userId: currentUser.uid,
                        timestamp: Date.now()
                    };
                    localStorage.setItem('pendingGameTime', JSON.stringify(pendingTime));
                }
            }
        }
        
        // Process pending data on page load
        async function processPendingData() {
            try {
                // Process pending game data
                const pendingGameData = localStorage.getItem('pendingGameData');
                if (pendingGameData) {
                    const data = JSON.parse(pendingGameData);
                    if (data.userId === currentUser?.uid) {
                        await saveGameData(data.gameName, data.gameData);
                        localStorage.removeItem('pendingGameData');
                    }
                }
                
                // Process pending game time
                const pendingGameTime = localStorage.getItem('pendingGameTime');
                if (pendingGameTime) {
                    const data = JSON.parse(pendingGameTime);
                    if (data.userId === currentUser?.uid) {
                        await saveGameTime(data.gameName, data.timeSpent);
                        localStorage.removeItem('pendingGameTime');
                    }
                }
            } catch (error) {
                console.error('Error processing pending data:', error);
            }
        }
        
        // Track game time and save game data when page is unloaded
        window.addEventListener('beforeunload', () => {
            savePendingData();
        });
        
        window.addEventListener('pagehide', () => {
            savePendingData();
        });

        
        // Developer Tools Protection
        (function() {
            'use strict';
            
            // Disable right-click context menu (silent - no alerts)
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                e.stopImmediatePropagation();
                return false;
            }, true);
            
            // Disable inspection keyboard shortcuts (triggers alert/redirect)
            document.addEventListener('keydown', function(e) {
                // F12
                if (e.keyCode === 123 || e.key === 'F12') {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
                // Ctrl+Shift+I (Inspector)
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.keyCode === 73 || e.key === 'I')) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
                // Ctrl+Shift+J (Console)
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.keyCode === 74 || e.key === 'J')) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
                // Ctrl+Shift+C (Element Selector)
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.keyCode === 67 || e.key === 'C')) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
                // Ctrl+U (View Source)
                if ((e.ctrlKey || e.metaKey) && (e.keyCode === 85 || e.key === 'u')) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
                // Ctrl+Shift+K (Console Firefox)
                if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.keyCode === 75 || e.key === 'K')) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                    document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                    setTimeout(() => window.location.href = 'about:blank', 500);
                    return false;
                }
            }, true);
            
            
            // Console detection
            let consoleDetectionCount = 0;
            let element = new Image();
            Object.defineProperty(element, 'id', {
                get: function() {
                    consoleDetectionCount++;
                    // Only trigger after multiple detections to avoid false positives
                    if (consoleDetectionCount > 3) {
                        document.documentElement.innerHTML = '<body style="background:#000;color:#ff0000;text-align:center;padding-top:40vh;font-size:24px;">ACCESS DENIED</body>';
                        setTimeout(() => window.location.href = 'about:blank', 500);
                    }
                }
            });
            
            // Less frequent console checks
            setInterval(function() {
                console.log(element);
                console.clear();
            }, 5000);
            
            // Disable text selection and copying (but allow input interaction)
            document.onselectstart = function(e) { 
                // Allow selection in input fields
                if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) {
                    return true;
                }
                return false; 
            };
            document.onmousedown = function(e) { 
                // Allow mouse down in input fields and buttons
                if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'BUTTON')) {
                    return true;
                }
                return false; 
            };
            document.ondragstart = function(e) { 
                // Allow dragging in input fields
                if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) {
                    return true;
                }
                return false; 
            };
            
        })();
        
        // Username Change Functions
        function showCustomizationError(message) {
            // Remove any existing notifications
            const existingNotifications = document.querySelectorAll('.customization-notification');
            existingNotifications.forEach(notification => notification.remove());
            
            const errorDiv = document.createElement('div');
            errorDiv.className = 'customization-notification';
            errorDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d32f2f;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10001;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            errorDiv.textContent = message;
            document.body.appendChild(errorDiv);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.parentNode.removeChild(errorDiv);
                }
            }, 5000);
        }
        
        function showCustomizationSuccess(message) {
            // Remove any existing notifications
            const existingNotifications = document.querySelectorAll('.customization-notification');
            existingNotifications.forEach(notification => notification.remove());
            
            const successDiv = document.createElement('div');
            successDiv.className = 'customization-notification';
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #2e7d32;
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10001;
                font-weight: 600;
                animation: slideInRight 0.3s ease-out;
            `;
            successDiv.textContent = message;
            document.body.appendChild(successDiv);
            
            // Auto remove after 3 seconds
            setTimeout(() => {
                if (successDiv.parentNode) {
                    successDiv.parentNode.removeChild(successDiv);
                }
            }, 3000);
        }
        
        function closeCustomizationPopup() {
            const popups = document.querySelectorAll('.customization-popup');
            popups.forEach(popup => {
                // Remove show class to trigger exit animation
                popup.classList.remove('show');
                
                // Remove from DOM after animation completes
                setTimeout(() => {
                    if (popup.parentNode) {
                        popup.parentNode.removeChild(popup);
                    }
                }, 300); // Match the CSS transition duration
            });
        }
        
        // Sidebar Navigation
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            const gamesContainer = document.querySelector('.games-container');
            const musicContainer = document.querySelector('.music-container');
            const hallOfFameContainer = document.querySelector('.hall-of-fame-container');
            const hacksContainer = document.querySelector('.hacks-container');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const section = this.getAttribute('data-section');
                    
                    // Remove active class from all nav items
                    navItems.forEach(nav => nav.classList.remove('active'));
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show/hide appropriate content
                    if (section === 'games') {
                        gamesContainer.style.display = 'block';
                        musicContainer.style.display = 'none';
                        hallOfFameContainer.style.display = 'none';
                        hacksContainer.style.display = 'none';
                    } else if (section === 'music') {
                        gamesContainer.style.display = 'none';
                        musicContainer.style.display = 'block';
                        hallOfFameContainer.style.display = 'none';
                        hacksContainer.style.display = 'none';
                    } else if (section === 'hall-of-fame') {
                        gamesContainer.style.display = 'none';
                        musicContainer.style.display = 'none';
                        hallOfFameContainer.style.display = 'block';
                        hacksContainer.style.display = 'none';
                    } else if (section === 'hacks') {
                        gamesContainer.style.display = 'none';
                        musicContainer.style.display = 'none';
                        hallOfFameContainer.style.display = 'none';
                        hacksContainer.style.display = 'block';
                    }
                });
            });
        });
        
        // Cheats Download Functions
        function downloadKittyTools() {
            // Create a download link for the Kitty-Tools.zip file
            const a = document.createElement('a');
            a.href = 'downloads/Kitty-Tools.zip';
            a.download = 'Kitty-Tools.zip';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
        
        async function downloadBlooketCheats() {
            // Fetch the actual blookethack.js file contents first
            let bookmarkCode;
            try {
                const response = await fetch('./downloads/blookethack.js');
                const jsContent = await response.text();
                // Create a shorter bookmarklet that loads the full code
                bookmarkCode = `javascript:(function(){fetch('./downloads/blookethack.js').then(r=>r.text()).then(code=>eval(code));})();`;
            } catch (error) {
                console.error('Failed to load blookethack.js:', error);
                bookmarkCode = "javascript:(function(){alert('Failed to load hack file. Please try again.');})();";
            }
            
            // Open about:blank tab in same window with bookmark instructions
            const newTab = window.open('about:blank', '_blank');
            
            // Create the content for the new tab
            const htmlContent = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>Blooket Cheats</title>
                    <style>
                        body {
                            font-family: Arial, sans-serif;
                            background: linear-gradient(90deg, #009CFC 0%, #A0AAFF 25%, #C97FFD 50%, #009CFC 75%, #A0AAFF 100%);
                            background-size: 400% 100%;
                            animation: hubbleGradient 8s ease-in-out infinite;
                            margin: 0;
                            padding: 20px;
                            min-height: 100vh;
                            display: flex;
                            justify-content: center;
                            align-items: center;
                        }
                        @keyframes hubbleGradient {
                            0%, 100% { background-position: 0% 50%; }
                            50% { background-position: 100% 50%; }
                        }
                        .container {
                            background: white;
                            border-radius: 20px;
                            padding: 40px;
                            text-align: center;
                            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                            max-width: 500px;
                            width: 90%;
                        }
                        h1 {
                            color: #333;
                            margin-bottom: 30px;
                        }
                        .directions {
                            margin: 20px 0;
                            line-height: 1.6;
                            color: #555;
                        }
                        .directions ol {
                            text-align: left;
                            margin: 15px 0;
                            padding-left: 20px;
                        }
                        .directions li {
                            margin: 8px 0;
                        }
                        .bookmark-draggable {
                            background: linear-gradient(135deg, #667eea, #764ba2);
                            color: white;
                            padding: 20px;
                            border-radius: 15px;
                            cursor: grab;
                            display: inline-block;
                            margin: 20px 0;
                            font-size: 1.1rem;
                            font-weight: 600;
                            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
                            transition: all 0.3s ease;
                            user-select: none;
                            border: 2px solid transparent;
                            -webkit-user-drag: element;
                            -moz-user-select: none;
                            -webkit-user-select: none;
                        }
                        .bookmark-draggable:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
                            border-color: rgba(255, 255, 255, 0.3);
                        }
                        .bookmark-draggable:active {
                            cursor: grabbing;
                            transform: scale(0.95);
                        }
                        
                        .bookmark-draggable[dragging] {
                            opacity: 0.7;
                            transform: scale(0.95);
                        }
                        .warning {
                            color: #e74c3c;
                            font-weight: bold;
                            margin-top: 20px;
                        }
                    </style>
                </head>
                <body>
                    <div class="container">
                        <h1>Blooket Cheats</h1>
                        <div class="directions">
                            <p><strong>Follow these steps to install the hack:</strong></p>
                            <ol>
                                <li>Press <strong>Ctrl + Shift + B</strong> to show your bookmarks bar</li>
                                <li>Drag the bookmark below to your bookmarks bar</li>
                                <li>Go to any Blooket game</li>
                                <li>Click the bookmark in your bookmarks bar to activate the cheats</li>
                            </ol>
                        </div>
                        <a id="bookmark" class="bookmark-draggable" draggable="true" href="${bookmarkCode}" ondragstart="event.dataTransfer.effectAllowed='copy'">Blooket Cheats</a>
                    </div>
                    <script>
                        const bookmark = document.getElementById("bookmark");
                        const bookmarkCode = '${bookmarkCode.replace(/'/g, "\\'")}';
                        
                        bookmark.addEventListener("dragstart", function(e) {
                            // Set the drag effect
                            e.dataTransfer.effectAllowed = "copy";
                            
                            // Set the bookmark URL and name with proper formats
                            e.dataTransfer.setData("text/uri-list", bookmarkCode);
                            e.dataTransfer.setData("text/plain", bookmarkCode);
                            e.dataTransfer.setData("text/html", '<a href="' + bookmarkCode + '">Blooket Cheats</a>');
                            e.dataTransfer.setData("text/x-moz-url", bookmarkCode + "\nBlooket Cheats");
                            e.dataTransfer.setData("text/url", bookmarkCode);
                            e.dataTransfer.setData("DownloadURL", bookmarkCode);
                            
                            // Try to set the bookmark name directly
                            try {
                                e.dataTransfer.setData("text/plain", bookmarkCode + "\nBlooket Cheats");
                            } catch (err) {
                                console.log("Could not set bookmark name:", err);
                            }
                            
                            // Visual feedback
                            bookmark.style.opacity = "0.7";
                            bookmark.setAttribute("dragging", "true");
                        });
                        
                        bookmark.addEventListener("dragend", function(e) {
                            // Reset visual feedback
                            bookmark.style.opacity = "1";
                            bookmark.removeAttribute("dragging");
                        });
                        
                        // Prevent default drag behavior that might interfere
                        bookmark.addEventListener("drag", function(e) {
                            e.preventDefault();
                        });
                        
                        // Ensure the element is properly draggable
                        bookmark.setAttribute("draggable", "true");
                    <\/script>
                </body>
                </html>
            `;
            newTab.document.write(htmlContent);
            newTab.document.close();
        }
        
        

        // Music Player Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const audioPlayer = document.getElementById('audio-player');
            const musicUrlInput = document.getElementById('music-url-input');
            const loadMusicBtn = document.getElementById('load-music-btn');
            const musicPlayer = document.getElementById('music-player');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const stopBtn = document.getElementById('stop-btn');
            const volumeBtn = document.getElementById('volume-btn');
            const progressBar = document.querySelector('.progress-bar');
            const progressFill = document.getElementById('progress-fill');
            const currentTimeDisplay = document.getElementById('current-time');
            const totalTimeDisplay = document.getElementById('total-time');
            const volumeSlider = document.getElementById('volume-slider');
            const volumeDisplay = document.getElementById('volume-display');
            const trackTitle = document.getElementById('track-title');
            const trackUrl = document.getElementById('track-url');
            const musicLibrary = document.getElementById('music-library');
            
            let isPlaying = false;
            let isMuted = false;
            let lastVolume = 1;
            let currentTrack = null;
            
            // Music Library Configuration - Add your tracks here!
            const musicLibraryData = [
                {
                    title: "Good Night Lofi",
                    artist: "FASSounds",
                    url: "https://mallysnacks.github.io/Music/good-night-lofi-cozy-chill-music-160166.mp3",
                    image: "images/Lofi-1.png"
                },
                {
                    title: "Lofi Study", 
                    artist: "FASSounds",
                    url: "https://mallysnacks.github.io/Music/lofi-study-calm-peaceful-chill-hop-112191.mp3",
                    image: "images/Lofi-2.png"
                },
                {
                    title: "Cutie Japan Lofi",
                    artist: "FASSounds",
                    url: "https://mallysnacks.github.io/Music/cutie-japan-lofi-402355.mp3",
                    image: "images/Lofi-3.png"
                },
                {
                    title: "Rainy Lofi City", 
                    artist: "lofidreams99",
                    url: "https://mallysnacks.github.io/Music/rainy-lofi-city-lofi-music-332746.mp3",
                    image: "images/Lofi-7.png"
                },
                {
                     title: "NYC Winter Lofi",
                    artist: "tramp963",
                    url: "https://mallysnacks.github.io/Music/nyc-winter-relaxing-lo-fi-music-265222.mp3",
                    image: "images/Lofi-5.png"
                },
                {
                    title: "Autumn Lofi", 
                    artist: "lofidreams99",
                    url: "https://mallysnacks.github.io/Music/autumn-chill-lofi-365946.mp3",
                    image: "images/Lofi-6.png"
                },     
                {
                    title: "Not Like Us", 
                    artist: "Kendrick Lamar",
                    url: "https://mallysnacks.github.io/Music/Kendrick%20Lamar%20-%20Not%20Like%20Us%20-%20KendrickLamarVEVO%20(youtube).mp3",
                    image: "images/Song-1.png"
                },
                 {
                    title: "FE!N", 
                    artist: "Travis Scott",
                    url: "https://mallysnacks.github.io/Music/Travis%20Scott%20-%20FE!N%20(Official%20Audio)%20ft.%20Playboi%20Carti%20-%20TravisScottVEVO%20(youtube).mp3",
                    image: "images/Song-2.png"
                },
                // Add more tracks here by copying the format above
            ];
            
            // Initialize music library
            function initializeMusicLibrary() {
                const tracksGrid = document.createElement('div');
                tracksGrid.className = 'music-tracks-grid';
                
                musicLibraryData.forEach((track, index) => {
                    const trackElement = createTrackElement(track, index);
                    tracksGrid.appendChild(trackElement);
                });
                
                musicLibrary.appendChild(tracksGrid);
            }
            
            // Create individual track element
            function createTrackElement(track, index) {
                const trackDiv = document.createElement('div');
                trackDiv.className = 'music-track';
                trackDiv.setAttribute('data-track-index', index);
                
                trackDiv.innerHTML = `
                    <div class="track-header">
                        <div class="track-image">
                            <img src="${track.image}" alt="${track.title}" onerror="this.style.display='none'; this.parentElement.innerHTML='🎵';">
                        </div>
                        <div class="track-details">
                            <div class="track-name">${track.title}</div>
                            <div class="track-artist">by: ${track.artist}</div>
                        </div>
                        <button class="track-play-btn" data-track-index="${index}">▶️</button>
                    </div>
                `;
                
                // Add click handlers
                const playBtn = trackDiv.querySelector('.track-play-btn');
                playBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playTrack(track, index);
                });
                
                trackDiv.addEventListener('click', () => {
                    playTrack(track, index);
                });
                
                return trackDiv;
            }
            
            // Play track function
            function playTrack(track, index) {
                // Update current track
                currentTrack = { ...track, index };
                
                // Set audio source
                audioPlayer.src = track.url;
                trackTitle.textContent = track.title;
                trackUrl.textContent = track.artist;
                
                // Update UI
                updateTrackUI(index);
                
                // Show player
                musicPlayer.style.display = 'block';
                
                // Load and play
                audioPlayer.load();
                audioPlayer.play();
                isPlaying = true;
                playPauseBtn.textContent = '⏸️';
            }
            
            // Update track UI
            function updateTrackUI(playingIndex) {
                // Remove playing class from all tracks
                document.querySelectorAll('.music-track').forEach(track => {
                    track.classList.remove('playing');
                });
                
                // Remove playing class from all play buttons
                document.querySelectorAll('.track-play-btn').forEach(btn => {
                    btn.classList.remove('playing');
                    btn.textContent = '▶️';
                });
                
                // Add playing class to current track
                const currentTrackElement = document.querySelector(`[data-track-index="${playingIndex}"]`);
                if (currentTrackElement) {
                    currentTrackElement.classList.add('playing');
                    const playBtn = currentTrackElement.querySelector('.track-play-btn');
                    playBtn.classList.add('playing');
                    playBtn.textContent = '⏸️';
                }
            }
            
            // Load music from URL
            loadMusicBtn.addEventListener('click', function() {
                const url = musicUrlInput.value.trim();
                if (!url) {
                    return;
                }
                
                // Validate URL
                try {
                    new URL(url);
                } catch (e) {
                    return;
                }
                
                // Create custom track
                const customTrack = {
                    title: 'Custom Track',
                    artist: 'Unknown Artist',
                    url: url,
                    image: 'https://via.placeholder.com/60x60/009CFC/ffffff?text=🎵'
                };
                
                // Play the custom track
                playTrack(customTrack, -1);
                
                // Clear input
                musicUrlInput.value = '';
            });
            
            // Play/Pause functionality
            playPauseBtn.addEventListener('click', function() {
                if (!audioPlayer.src) {
                    return;
                }
                
                if (isPlaying) {
                    audioPlayer.pause();
                    playPauseBtn.textContent = '▶️';
                    isPlaying = false;
                    
                    // Update track UI
                    if (currentTrack && currentTrack.index >= 0) {
                        const playBtn = document.querySelector(`[data-track-index="${currentTrack.index}"] .track-play-btn`);
                        if (playBtn) {
                            playBtn.textContent = '▶️';
                            playBtn.classList.remove('playing');
                        }
                    }
                } else {
                    audioPlayer.play();
                    playPauseBtn.textContent = '⏸️';
                    isPlaying = true;
                    
                    // Update track UI
                    if (currentTrack && currentTrack.index >= 0) {
                        const playBtn = document.querySelector(`[data-track-index="${currentTrack.index}"] .track-play-btn`);
                        if (playBtn) {
                            playBtn.textContent = '⏸️';
                            playBtn.classList.add('playing');
                        }
                    }
                }
            });
            
            // Stop functionality
            stopBtn.addEventListener('click', function() {
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
                playPauseBtn.textContent = '▶️';
                isPlaying = false;
                progressFill.style.width = '0%';
                currentTimeDisplay.textContent = '0:00';
                
                // Update track UI
                if (currentTrack && currentTrack.index >= 0) {
                    const playBtn = document.querySelector(`[data-track-index="${currentTrack.index}"] .track-play-btn`);
                    if (playBtn) {
                        playBtn.textContent = '▶️';
                        playBtn.classList.remove('playing');
                    }
                }
            });
            
            // Volume control
            volumeSlider.addEventListener('input', function() {
                const volume = this.value / 100;
                audioPlayer.volume = volume;
                volumeDisplay.textContent = this.value + '%';
                
                // Update volume button
                if (volume === 0) {
                    volumeBtn.textContent = '🔇';
                } else if (volume < 0.5) {
                    volumeBtn.textContent = '🔉';
                } else {
                    volumeBtn.textContent = '🔊';
                }
            });
            
            // Mute/Unmute
            volumeBtn.addEventListener('click', function() {
                if (isMuted) {
                    audioPlayer.volume = lastVolume;
                    volumeSlider.value = lastVolume * 100;
                    volumeDisplay.textContent = Math.round(lastVolume * 100) + '%';
                    isMuted = false;
                } else {
                    lastVolume = audioPlayer.volume;
                    audioPlayer.volume = 0;
                    volumeSlider.value = 0;
                    volumeDisplay.textContent = '0%';
                    isMuted = true;
                }
                
                // Update button
                if (audioPlayer.volume === 0) {
                    volumeBtn.textContent = '🔇';
                } else if (audioPlayer.volume < 0.5) {
                    volumeBtn.textContent = '🔉';
                } else {
                    volumeBtn.textContent = '🔊';
                }
            });
            
            // Progress bar click
            progressBar.addEventListener('click', function(e) {
                if (!audioPlayer.src || !audioPlayer.duration) return;
                
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const percentage = clickX / rect.width;
                const newTime = percentage * audioPlayer.duration;
                
                audioPlayer.currentTime = newTime;
            });
            
            // Update progress bar and time
            audioPlayer.addEventListener('timeupdate', function() {
                if (audioPlayer.duration) {
                    const percentage = (audioPlayer.currentTime / audioPlayer.duration) * 100;
                    progressFill.style.width = percentage + '%';
                    
                    currentTimeDisplay.textContent = formatTime(audioPlayer.currentTime);
                }
            });
            
            // Update total time when metadata loads
            audioPlayer.addEventListener('loadedmetadata', function() {
                totalTimeDisplay.textContent = formatTime(audioPlayer.duration);
            });
            
            // Handle audio end
            audioPlayer.addEventListener('ended', function() {
                playPauseBtn.textContent = '▶️';
                isPlaying = false;
                progressFill.style.width = '0%';
                currentTimeDisplay.textContent = '0:00';
                
                // Update track UI
                if (currentTrack && currentTrack.index >= 0) {
                    const playBtn = document.querySelector(`[data-track-index="${currentTrack.index}"] .track-play-btn`);
                    if (playBtn) {
                        playBtn.textContent = '▶️';
                        playBtn.classList.remove('playing');
                    }
                }
            });
            
            // Handle audio errors
            audioPlayer.addEventListener('error', function() {
                musicPlayer.style.display = 'none';
            });
            
            // Format time helper function
            function formatTime(seconds) {
                if (isNaN(seconds)) return '0:00';
                
                const mins = Math.floor(seconds / 60);
                const secs = Math.floor(seconds % 60);
                return mins + ':' + (secs < 10 ? '0' : '') + secs;
            }
            
            // Allow Enter key to load music
            musicUrlInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    loadMusicBtn.click();
                }
            });
            
            // Initialize the music library
            initializeMusicLibrary();
        });
        
    </script>

    <!-- Watermark Component -->
    <script type="module" src="./watermark.js"></script>
    
    
</body>
</html>
